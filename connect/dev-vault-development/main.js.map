{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app.constants.ts","./src/app/app.module.ts","./src/app/app.routing.ts","./src/app/components/spinner/spinner.component.ts","./src/app/components/spinner/spinner.component.html","./src/app/directives/image-fallback.directive.ts","./src/app/fasten-stitch/fasten-stitch.component.ts","./src/app/fasten-stitch/fasten-stitch.component.html","./src/app/models/fasten/vaultProfile.ts","./src/app/models/forms/form-health-system-request.ts","./src/app/models/forms/form-support-request.ts","./src/app/models/search-filter.ts","./src/app/models/vault-config.ts","./src/app/pages/complete/complete.component.ts","./src/app/pages/complete/complete.component.html","./src/app/pages/dashboard/dashboard.component.ts","./src/app/pages/dashboard/dashboard.component.html","./src/app/pages/form-health-system-request/form-health-system-request.component.ts","./src/app/pages/form-health-system-request/form-health-system-request.component.html","./src/app/pages/form-support-request/form-support-request.component.ts","./src/app/pages/form-support-request/form-support-request.component.html","./src/app/pages/health-system-brand-details/health-system-brand-details.component.ts","./src/app/pages/health-system-brand-details/health-system-brand-details.component.html","./src/app/pages/health-system-connecting/health-system-connecting.component.ts","./src/app/pages/health-system-connecting/health-system-connecting.component.html","./src/app/pages/health-system-search/health-system-search.component.ts","./src/app/pages/health-system-search/health-system-search.component.html","./src/app/pages/identity-verification/identity-verification.component.ts","./src/app/pages/identity-verification/identity-verification.component.html","./src/app/pages/vault-profile-signin-code/vault-profile-signin-code.component.ts","./src/app/pages/vault-profile-signin-code/vault-profile-signin-code.component.html","./src/app/pages/vault-profile-signin/vault-profile-signin.component.ts","./src/app/pages/vault-profile-signin/vault-profile-signin.component.html","./src/app/pipes/safe-html.pipe.ts","./src/app/router/nav-outlet/nav-outlet-link.directive.ts","./src/app/router/nav-outlet/nav-outlet.component.ts","./src/app/router/nav-outlet/nav-outlet.component.html","./src/app/router/nav-outlet/nav-outlet.directive.ts","./src/app/router/nav-outlet/nav-outlet.service.ts","./src/app/services/auth.service.ts","./src/app/services/config.service.ts","./src/app/services/message-bus.service.ts","./src/app/services/vault.service.ts","./src/app/utils/connect-helper.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["export enum ApiMode {\n  Live = \"live\",\n  Test = \"test\",\n}\n\nexport enum ConnectionStatus {\n  Authorized = \"authorized\",\n  Revoked = \"revoked\"\n}\n\nexport enum ConnectMode {\n  Redirect = \"redirect\",\n  Popup = \"popup\",\n}\n\nexport const ConnectWindowTimeout = 24*5000 //wait 2 minutes (5 * 24 = 120)\n","import { NgModule, Injector } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport {FormsModule} from '@angular/forms';\nimport { createCustomElement } from '@angular/elements';\nimport {CommonModule} from '@angular/common';\nimport {HttpClientModule} from '@angular/common/http';\nimport {InfiniteScrollModule} from 'ngx-infinite-scroll';\nimport { CodeInputModule } from 'angular-code-input';\n\nimport {ImageFallbackDirective} from './directives/image-fallback.directive';\nimport {NavOutletComponent} from './router/nav-outlet/nav-outlet.component';\nimport {NavOutletDirective} from './router/nav-outlet/nav-outlet.directive';\nimport {NavOutletLinkDirective} from './router/nav-outlet/nav-outlet-link.directive';\n\nimport { SafeHtmlPipe } from './pipes/safe-html.pipe';\nimport { SpinnerComponent } from './components/spinner/spinner.component';\n\nimport { FastenStitchComponent } from './fasten-stitch/fasten-stitch.component';\nimport { DashboardComponent } from './pages/dashboard/dashboard.component';\nimport { VaultProfileSigninComponent } from './pages/vault-profile-signin/vault-profile-signin.component';\nimport { VaultProfileSigninCodeComponent } from './pages/vault-profile-signin-code/vault-profile-signin-code.component';\nimport { IdentityVerificationComponent } from './pages/identity-verification/identity-verification.component';\nimport { HealthSystemSearchComponent } from './pages/health-system-search/health-system-search.component';\nimport { HealthSystemBrandDetailsComponent } from './pages/health-system-brand-details/health-system-brand-details.component';\nimport { FormHealthSystemRequestComponent } from './pages/form-health-system-request/form-health-system-request.component';\nimport { FormSupportRequestComponent } from './pages/form-support-request/form-support-request.component';\nimport { HealthSystemConnectingComponent } from './pages/health-system-connecting/health-system-connecting.component';\nimport { CompleteComponent } from './pages/complete/complete.component';\nimport {NavOutletService} from './router/nav-outlet/nav-outlet.service';\n\n\n@NgModule({\n  declarations: [\n    FastenStitchComponent,\n    DashboardComponent,\n    VaultProfileSigninComponent,\n    VaultProfileSigninCodeComponent,\n    IdentityVerificationComponent,\n    HealthSystemSearchComponent,\n    HealthSystemBrandDetailsComponent,\n    FormHealthSystemRequestComponent,\n    FormSupportRequestComponent,\n    HealthSystemConnectingComponent,\n    CompleteComponent,\n\n    ImageFallbackDirective,\n    NavOutletComponent,\n    NavOutletDirective,\n    NavOutletLinkDirective,\n    SafeHtmlPipe,\n    SpinnerComponent,\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    HttpClientModule,\n    CommonModule,\n    InfiniteScrollModule,\n    CodeInputModule,\n  ],\n  // providers: [NavOutletService],\n  providers: [],\n  entryComponents: [FastenStitchComponent]\n})\nexport class AppModule {\n  constructor(injector: Injector) {\n    const el = createCustomElement(FastenStitchComponent, { injector });\n    customElements.define('fasten-stitch', el);\n  }\n\n  ngDoBootstrap() {}\n}\n","import { Type} from '@angular/core';\nimport {VaultProfileSigninComponent} from './pages/vault-profile-signin/vault-profile-signin.component';\nimport {VaultProfileSigninCodeComponent} from './pages/vault-profile-signin-code/vault-profile-signin-code.component';\nimport {IdentityVerificationComponent} from './pages/identity-verification/identity-verification.component';\nimport {\n  FormHealthSystemRequestComponent\n} from './pages/form-health-system-request/form-health-system-request.component';\nimport {FormSupportRequestComponent} from './pages/form-support-request/form-support-request.component';\nimport {HealthSystemSearchComponent} from './pages/health-system-search/health-system-search.component';\nimport {\n  HealthSystemBrandDetailsComponent\n} from './pages/health-system-brand-details/health-system-brand-details.component';\nimport {HealthSystemConnectingComponent} from './pages/health-system-connecting/health-system-connecting.component';\nimport {CompleteComponent} from './pages/complete/complete.component';\nimport {NavOutletPage} from './models/nav-outlet-page';\n\nexport enum ComponentNavPage {\n  Default = \"\",\n\n  VaultProfileSignin = \"vault-profile-signin\",\n  VaultProfileSigninCode = \"vault-profile-signin-code\",\n  IdentityVerification = \"identity-verification\",\n\n  Dashboard = \"dashboard\",\n  FormHealthSystemRequest = \"form-health-system-request\",\n  FormSupportRequest = \"form-support-request\",\n\n  HealthSystemSearch = \"health-system-search\",\n  HealthSystemBrandDetails = \"health-system-brand-details\",\n  HealthSystemConnecting = \"health-system-connecting\",\n  CompleteSummary = \"complete\",\n}\n\nexport interface NavOutletCanActivate {\n  canActivate(route: NavOutletRoute): Promise <boolean>\n}\nexport class NavOutletRoute {\n  page: string = ComponentNavPage.Dashboard\n  component: Type<NavOutletPage> = null\n  inputs?: Map<string, any>\n  canActivate?: NavOutletCanActivate\n}\n\nexport const Routes: NavOutletRoute[] = [\n  //on empty, this is where we go\n  { page: ComponentNavPage.Default, component: VaultProfileSigninComponent },\n\n  { page: ComponentNavPage.VaultProfileSignin, component: VaultProfileSigninComponent },\n  { page: ComponentNavPage.VaultProfileSigninCode, component: VaultProfileSigninCodeComponent },\n  { page: ComponentNavPage.IdentityVerification, component: IdentityVerificationComponent },\n\n  { page: ComponentNavPage.Dashboard, component: HealthSystemSearchComponent },\n  { page: ComponentNavPage.FormHealthSystemRequest, component: FormHealthSystemRequestComponent },\n  { page: ComponentNavPage.FormSupportRequest, component: FormSupportRequestComponent },\n\n  { page: ComponentNavPage.HealthSystemSearch, component: HealthSystemSearchComponent },\n  { page: ComponentNavPage.HealthSystemBrandDetails, component: HealthSystemBrandDetailsComponent },\n  { page: ComponentNavPage.HealthSystemConnecting, component: HealthSystemConnectingComponent },\n  { page: ComponentNavPage.CompleteSummary, component: CompleteComponent },\n\n\n  // { page: ComponentNavPage.Default},\n  //\n  // { page: ComponentNavPage.VaultProfileSignin},\n  // { page: ComponentNavPage.VaultProfileSigninCode},\n  // { page: ComponentNavPage.IdentityVerification},\n  //\n  // { page: ComponentNavPage.Dashboard},\n  // { page: ComponentNavPage.FormHealthSystemRequest},\n  // { page: ComponentNavPage.FormSupportRequest},\n  //\n  // { page: ComponentNavPage.HealthSystemSearch},\n  // { page: ComponentNavPage.HealthSystemBrandDetails},\n  // { page: ComponentNavPage.HealthSystemConnecting},\n  // { page: ComponentNavPage.CompleteSummary},\n]\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-spinner',\n  templateUrl: './spinner.component.html',\n  styleUrls: ['./spinner.component.scss']\n})\nexport class SpinnerComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<svg class=\"mr-2 h-5 w-5 animate-spin text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n  <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n  <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n</svg>\n","import {Directive, ElementRef, HostListener, Input} from '@angular/core';\n\nconst DEFAULT_IMAGE_FALLBACK_PATH: string = 'https://cdn.fastenhealth.com/images/no-image.svg';\n\n@Directive({\n  selector: 'img[imageFallback]'\n})\nexport class ImageFallbackDirective {\n  @Input() imageFallback?: string;\n  constructor(private elementRef: ElementRef) {}\n\n  @HostListener('error')\n  loadFallbackOnError() {\n    // Check to see if we have already tried to load the fallback image.\n    // Avoids endless loop if for some reason fallback image is missing. Just accept the broken image.\n    if (this.path(this.elementRef.nativeElement.src) == this.path(this.fallbackSrc())) {\n      return;\n    }\n\n    this.elementRef.nativeElement.src = this.fallbackSrc();\n  }\n\n  private fallbackSrc(): string {\n    return this.imageFallback || DEFAULT_IMAGE_FALLBACK_PATH;\n  }\n\n  private path(urlString: string): string {\n    // remove http(s) and domain\n    return urlString.replace(/^https?:\\/\\/[^\\/]*/, '');\n  }\n\n}\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n  AfterViewInit,\n} from '@angular/core';\nimport {LighthouseBrandListDisplayItem} from '../models/lighthouse/lighthouse-source-search';\nimport {ApiMode} from '../app.constants';\nimport {MessageBusService} from '../services/message-bus.service';\nimport {OrganizationConnectionCallbackEvent} from '../models/organization-connection-callback-event';\nimport { ElementRef, ViewChild } from '@angular/core';\nimport {ConfigService} from '../services/config.service';\n\nexport class SourceListItem {\n  brand: LighthouseBrandListDisplayItem\n  searchHighlights?: string[]\n}\n\n\n@Component({\n  // standalone: true,\n  selector: 'fasten-stitch',\n  templateUrl: './fasten-stitch.component.html',\n  styleUrls: ['./fasten-stitch.component.css'],\n  // SEE https://stackoverflow.com/questions/67115155/angular-web-component-how-to-embed-css-file-into-the-final-js-file\n  // using view encapsulation to namespace CSS.\n  // encapsulation: ViewEncapsulation.None //default is  ViewEncapsulation.Emulated\n})\nexport class FastenStitchComponent implements OnInit, AfterViewInit {\n  @Input('public-id') publicId = ''; //validate\n  @Input('reconnect-org-connection-id') reconnectOrgConnectionId: string | null = null;\n  @Output('orgConnectionCallback') orgConnectionCallback = new EventEmitter<OrganizationConnectionCallbackEvent>()\n\n  public errorMessage: string\n\n  @ViewChild('stitchModalButton', { static: false }) public stitchModalButton: ElementRef;\n  @ViewChild('stitchModal', { static: false }) public stitchModal: ElementRef<HTMLDialogElement>;\n\n  // private flowbitStitchModal: Modal = null\n  constructor(\n    private host: ElementRef,\n    private configService: ConfigService,\n    public messageBus: MessageBusService,\n  ) {\n\n    //https://stackoverflow.com/a/69173549/1157633\n    this.host.nativeElement.show = this.showStitchModalExt.bind(this);\n    this.host.nativeElement.hide = this.hideStitchModalExt.bind(this);\n  }\n\n  ngAfterViewInit() {\n    // this.flowbitStitchModal = new Modal(this.stitchModal.nativeElement, {\n    //   onHide: () => {\n    //     this.messageBus.reset()\n    //   },\n    // });\n  }\n\n  ngOnInit(): void {\n    let publicIdParts = this.publicId.split('_')\n    let apiMode = ApiMode.Test\n    if(publicIdParts.length == 3 && publicIdParts[1] == ApiMode.Live) {\n      apiMode = ApiMode.Live\n    }\n    if(publicIdParts.length != 3){\n      console.error(\"Could not register Fasten Connect installation: missing or invalid id\", this.publicId)\n      this.errorMessage = 'Could not register Fasten Connect installation: missing or invalid id. Please contact the developer of this app.'\n      return\n    }\n    console.log(this.publicId, publicIdParts, apiMode)\n    //update the system config\n    this.configService.systemConfig = {\n      apiMode: apiMode,\n      publicId: this.publicId,\n      reconnectOrgConnectionId: this.reconnectOrgConnectionId,\n    }\n\n\n    // this.connectApi.getOrgByPublicId(this.publicId).subscribe((org: Organization) => {\n    //   this.org = org\n    // },(err) => {\n    //   this.errorMessage = 'Could not register Fasten Connect installation using id. Please contact the developer of this app.'\n    //   console.log(\"Invalid Fasten Connect registration\", err)\n    // })\n\n    this.messageBus.orgConnectionCallbackSubject.subscribe((orgConnectionCallbackData) => {\n      console.log(\"bubbling up event\", orgConnectionCallbackData)\n      this.orgConnectionCallback.emit(orgConnectionCallbackData)\n    })\n  }\n\n  showStitchModal(): void {\n\n    if(this.reconnectOrgConnectionId){\n      //TODO: not supported yet\n      // const childSpan: HTMLElement = document.createElement('span');\n      // childSpan.innerHTML = 'Reconnecting...';\n      // (this.stitchModalButton.nativeElement as HTMLButtonElement).replaceChildren(childSpan); // Component needs to be added here\n      //\n      // this.connectApi.getOrgConnectionById(this.publicId, this.reconnectOrgConnectionId).subscribe((orgConnection) => {\n      //   console.log(\"Reconnect Org Connection\", orgConnection)\n      //\n      //   ConnectHelper(this.connectApi, this.messageBus, {\n      //     catalog_brand_id: orgConnection.catalog_brand_id,\n      //     catalog_endpoint_id: orgConnection.catalog_endpoint_id,\n      //     catalog_portal_id: orgConnection.catalog_portal_id,\n      //     connect_mode: this.connectMode,\n      //     external_id: this.externalId,\n      //     external_state: this.externalState,\n      //     org_connection_id: orgConnection.org_connection_id,\n      //     public_id: this.publicId\n      //   })\n      //\n      // }, (err) => {\n      //   this.errorMessage = 'Could not find the patient connection using id. Please contact the developer of this app.'\n      //   console.log(\"Invalid Fasten Connect Connection ID\", err)\n      //   this.stitchModal.nativeElement.show()\n      // })\n    } else {\n      this.stitchModal.nativeElement.show()\n    }\n\n  }\n\n  // TODO: this is required because when using the showStitchModal() method, the Search component is not being rendered correctly\n  // this function can be called externally to show the modal\n  showStitchModalExt(): void {\n    this.stitchModal.nativeElement.show()\n  }\n\n  hideStitchModalExt(): void {\n    this.stitchModal.nativeElement.close()\n  }\n}\n","<!-- Modal toggle -->\n<button #stitchModalButton (click)=\"showStitchModal()\" class=\"block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\" type=\"button\">\n  <div #ref><ng-content></ng-content></div>\n  <span *ngIf=\"!ref.hasChildNodes()\">\n    Share Records\n </span>\n</button>\n\n<!-- Main modal -->\n<dialog #stitchModal id=\"stitchModal\" tabindex=\"-1\" aria-hidden=\"true\">\n  <div id=\"test-mode-banner\" class=\"mx-auto w-full max-w-[440px] mb-2 bg-[#DC3545] text-white text-center py-2 px-4 rounded-t-lg font-medium text-sm flex items-center justify-center gap-2\">\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-construction\"><rect x=\"2\" y=\"6\" width=\"20\" height=\"8\" rx=\"1\"/><path d=\"M17 14v7\"/><path d=\"M7 14v7\"/><path d=\"M17 3v3\"/><path d=\"M7 3v3\"/><path d=\"M10 14 2.3 6.3\"/><path d=\"m14 6 7.7 7.7\"/><path d=\"m8 6 8 8\"/></svg>\n    You are using Fasten in test mode\n  </div>\n  <div id=\"widget-container\" class=\"mx-auto w-full max-w-[440px] bg-white rounded-lg shadow-lg p-6\">\n          <app-nav-outlet></app-nav-outlet>\n  </div>\n\n  <!--  <div-->\n<!--    *ngIf=\"!errorMessage; else errorMessagePanel\"-->\n<!--    class=\"relative p-4 w-full max-w-2xl h-full md:h-auto\">-->\n<!--    &lt;!&ndash; Modal content &ndash;&gt;-->\n<!--    <div class=\"relative p-4 bg-white rounded-lg shadow dark:bg-gray-800 sm:p-5\">-->\n<!--      &lt;!&ndash; Modal header &ndash;&gt;-->\n\n<!--      <div class=\"flex justify-between items-center pb-4 mb-4 rounded-t border-b sm:mb-5 dark:border-gray-600\">-->\n<!--        <h3 *ngIf=\"!(messageBus.componentNavigationSubject | async)?.title; else brandName\" class=\"text-lg font-semibold text-gray-900 dark:text-white\">-->\n<!--          Select a Health System-->\n<!--        </h3>-->\n\n<!--        <ng-template #brandName>-->\n<!--          <h3 class=\"text-lg font-semibold text-gray-900 dark:text-white\">-->\n<!--            <button (click)=\"messageBus.componentNavigationSubject.next(null);\" type=\"button\" class=\"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white\">-->\n<!--              <svg class=\"w-5 h-5 rtl:rotate-180\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\">-->\n<!--                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18\" />-->\n<!--              </svg>-->\n<!--              <span class=\"sr-only\">Back</span>-->\n<!--            </button>-->\n<!--            {{(messageBus.componentNavigationSubject | async)?.title}}-->\n<!--          </h3>-->\n\n<!--        </ng-template>-->\n\n<!--        <button-->\n<!--          (click)=\"hideStitchModalExt()\"-->\n<!--          type=\"button\" class=\"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white\" >-->\n<!--          <svg aria-hidden=\"true\" class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clip-rule=\"evenodd\"></path></svg>-->\n<!--          <span class=\"sr-only\">Close modal</span>-->\n<!--        </button>-->\n<!--      </div>-->\n<!--      &lt;!&ndash; Modal body &ndash;&gt;-->\n\n<!--      <app-nav-outlet-->\n<!--        [org]=\"org\"-->\n<!--        [publicId]=\"publicId\"-->\n<!--        [apiMode]=\"apiMode\"-->\n<!--        [connectMode]=\"connectMode\"-->\n<!--        [reconnectOrgConnectionId]=\"reconnectOrgConnectionId\"-->\n<!--        [externalId]=\"externalId\"-->\n<!--        [externalState]=\"externalState\"-->\n<!--      ></app-nav-outlet>-->\n\n<!--&lt;!&ndash;      <app-brand-search *ngIf=\"!(messageBus.selectedBrandSubject | async); else portalConnect\" [apiMode]=\"apiMode\"></app-brand-search>&ndash;&gt;-->\n<!--&lt;!&ndash;      <ng-template #portalConnect>&ndash;&gt;-->\n<!--&lt;!&ndash;        <app-portal-connect&ndash;&gt;-->\n<!--&lt;!&ndash;          [org]=\"org\"&ndash;&gt;-->\n<!--&lt;!&ndash;          [publicId]=\"publicId\"&ndash;&gt;-->\n<!--&lt;!&ndash;          [brand]=\"(messageBus.selectedBrandSubject | async)\"&ndash;&gt;-->\n<!--&lt;!&ndash;          [apiMode]=\"apiMode\"&ndash;&gt;-->\n<!--&lt;!&ndash;          [connectMode]=\"connectMode\"&ndash;&gt;-->\n<!--&lt;!&ndash;          [reconnectOrgConnectionId]=\"reconnectOrgConnectionId\"&ndash;&gt;-->\n<!--&lt;!&ndash;        ></app-portal-connect>&ndash;&gt;-->\n<!--&lt;!&ndash;      </ng-template>&ndash;&gt;-->\n<!--    </div>-->\n<!--  </div>-->\n</dialog>\n\n\n<ng-template #errorMessagePanel>\n\n  <div class=\"relative p-4 w-full max-w-2xl h-full md:h-auto\">\n    <div id=\"alert-additional-content-2\" class=\"p-4 mb-4 text-red-800 border border-red-300 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400 dark:border-red-800\" role=\"alert\">\n      <div class=\"flex items-center\">\n        <svg class=\"flex-shrink-0 w-4 h-4 me-2\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path fill-rule=\"evenodd\" d=\"M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm7.707-3.707a1 1 0 0 0-1.414 1.414L10.586 12l-2.293 2.293a1 1 0 1 0 1.414 1.414L12 13.414l2.293 2.293a1 1 0 0 0 1.414-1.414L13.414 12l2.293-2.293a1 1 0 0 0-1.414-1.414L12 10.586 9.707 8.293Z\" clip-rule=\"evenodd\"/>\n        </svg>\n\n        <span class=\"sr-only\">Error</span>\n        <h3 class=\"text-lg font-medium\">Configuration Error</h3>\n      </div>\n      <div class=\"mt-2 mb-4 text-sm\">\n        {{errorMessage}}\n      </div>\n      <div class=\"flex\">\n\n        <button (click)=\"hideStitchModalExt()\" type=\"button\"\n                class=\"text-red-800 bg-transparent border border-red-800 hover:bg-red-900 hover:text-white focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-xs px-3 py-1.5 text-center dark:hover:bg-red-600 dark:border-red-600 dark:text-red-500 dark:hover:text-white dark:focus:ring-red-800\">Close</button>\n      </div>\n    </div>\n  </div>\n</ng-template>\n","export class VaultProfile {\n  id?: string\n  name?: string\n  email?: string\n  password?: string\n  org_id?: string\n\n  //not sent to the server\n  password_confirm?: string = \"\"\n  agree_terms?: boolean = false\n}\n","export class FormHealthSystemRequest {\n  name: string = \"\"\n  email: string = \"\"\n  website: string = \"\"\n  street_address: string = \"\"\n}\n","\nexport class FormSupportRequest {\n  healthsystem_name: string\n  email: string\n  request_content: string\n\n  org_id: string\n  org_name: string\n  version: string\n  arch: string\n  os: string\n}\n","\nexport class SearchFilter {\n  //primary search terms (changes here should restart the search completely)\n  query: string = \"\"\n\n  //secondary search terms/facets (changes here should restart pagination)\n  platformTypes: string[] = [];\n  categories: string[] = [];\n  showHidden: boolean = false;\n\n  //pagination - this is the current page (changes here should be ignored)\n  searchAfter: string | string[] = '';\n\n  fields: string[] = []; //specify the fields to return. if null or empty list, return all.\n}\n","/**\n * AppConfig interface. Update this interface to strictly type your config\n * object.\n */\nimport {ApiMode} from '../app.constants';\nimport {Organization} from './fasten/organization';\nimport {VaultProfile} from './fasten/vaultProfile';\nimport {SearchFilter} from './search-filter';\nimport {\n  LighthouseBrandListDisplayItem,\n  LighthouseEndpointListDisplayItem,\n  LighthousePortalListDisplayItem\n} from './lighthouse/lighthouse-source-search';\nimport {RecordLocatorFacility} from './fasten/record-locator-facility';\n\nexport interface VaultSystemConfig {\n  publicId: string;\n  apiMode: ApiMode;\n  org?: Organization;\n  org_id?: string\n  reconnectOrgConnectionId?: string;\n}\n\nexport class VaultProfileConfig {\n  vaultProfile?: VaultProfile;\n\n  // connected patient accounts\n  connectedPatientAccounts?: RecordLocatorFacility[];\n\n  // pending patient accounts?\n  pendingPatientAccounts?: { brand: LighthouseBrandListDisplayItem, portal: LighthousePortalListDisplayItem, endpoint: LighthouseEndpointListDisplayItem }[];\n  addPendingAccount(brand: LighthouseBrandListDisplayItem, portal: LighthousePortalListDisplayItem, endpoint: LighthouseEndpointListDisplayItem): void {\n    if (!this.pendingPatientAccounts) {\n      this.pendingPatientAccounts = []\n    }\n    this.pendingPatientAccounts?.push({brand, portal, endpoint})\n  }\n  addConnectedAccount(recordLocatorFacility: RecordLocatorFacility): void {\n    if (!this.connectedPatientAccounts) {\n      this.connectedPatientAccounts = []\n    }\n    this.connectedPatientAccounts?.push(recordLocatorFacility)\n  }\n}\n\n\nexport interface VaultSearchConfig {\n  searchFilter?: SearchFilter\n  selectedBrand?: LighthouseBrandListDisplayItem\n}\n\n// - apiMode\n// - organization information\n// - org credential information\n// - reconnect id.\n\n/**\n * Default configuration for the entire application. This object is used by\n * \"PortalConfigService\" to set the default configuration.\n */\nexport const vaultConfigDefaults: VaultSystemConfig = {\n  publicId: '',\n  apiMode: ApiMode.Test\n};\n","import {ChangeDetectorRef, Component, OnInit} from '@angular/core';\nimport {NavOutletPage} from '../../models/nav-outlet-page';\n\n@Component({\n  selector: 'app-complete',\n  templateUrl: './complete.component.html',\n  styleUrls: ['./complete.component.scss']\n})\nexport class CompleteComponent implements OnInit, NavOutletPage {\n\n  constructor(\n    public changeRef: ChangeDetectorRef,\n  ) { }\n\n  ngOnInit(): void {\n  }\n\n  markForCheck(){\n    this.changeRef.markForCheck()\n  }\n\n}\n","<!-- Step: COMPLETION -->\n<div id=\"step-completion\" class=\"step-view text-center space-y-6\">\n  <div class=\"flex justify-center items-center\">\n    <h1 class=\"az-logo\">fasten</h1>\n  </div>\n\n  <div class=\"w-16 h-16 mx-auto bg-[#5B47FB]/10 rounded-full flex items-center justify-center success-circle\">\n    <svg class=\"w-8 h-8 text-[#5B47FB]\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\"\n         viewBox=\"0 0 24 24\">\n      <path class=\"success-check\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M5 13l4 4L19 7\" />\n    </svg>\n  </div>\n\n  <div class=\"space-y-2\">\n    <h2 class=\"text-2xl font-bold\">Success!</h2>\n    <p class=\"text-gray-600\">\n      Your health records have been successfully linked with Acme Labs.\n      You can now close this window.\n    </p>\n  </div>\n\n  <button id=\"completion-close\" class=\"bg-[#5B47FB] hover:bg-[#4936E8] text-white py-2 px-4 rounded-md\">\n    Close\n  </button>\n</div>\n<!-- End Step: COMPLETION -->\n","import {ChangeDetectorRef, Component, OnInit} from '@angular/core';\nimport {VaultService} from '../../services/vault.service';\nimport {ConfigService} from '../../services/config.service';\nimport {NavOutletPage} from '../../models/nav-outlet-page';\n\n@Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.scss']\n})\nexport class DashboardComponent implements OnInit, NavOutletPage {\n\n\n  constructor(\n    public changeRef: ChangeDetectorRef,\n    private vaultService: VaultService,\n    public configService: ConfigService,\n  ) { }\n\n  ngOnInit(): void {\n    this.vaultService.getRecordLocatorFacilities().subscribe((facilities)=>{\n      console.log(\"record locator facilities\", facilities)\n      for (let facility of facilities) {\n        this.configService.vaultProfileAddConnectedAccount(facility)\n      }\n    })\n  }\n  markForCheck(){\n    this.changeRef.markForCheck()\n  }\n}\n","<div id=\"step-connecting-systems\" class=\"space-y-6\">\n  <div class=\"flex justify-center items-center\">\n    <h1 class=\"az-logo\">fasten</h1>\n  </div>\n\n  <div class=\"space-y-2\">\n    <h2 class=\"text-xl font-bold\">Select Health Systems</h2>\n    <p class=\"text-sm text-gray-600\">\n      Choose the health systems you'd like to connect\n    </p>\n  </div>\n\n  <!-- dynamically populate list of systems -->\n  <div class=\"space-y-3\" id=\"connecting-systems-list\">\n    <!-- connected accounts -->\n    <div *ngFor=\"let connectedAccount of ((configService.vaultProfileConfigSubject | async)?.connectedPatientAccounts || [])\" class=\"flex items-center p-3 border rounded-lg hover:border-[#5B47FB]/30 hover:shadow-sm transition-all\">\n      <button class=\"connect-btn w-8 h-8 rounded-full border border-gray-300 transition-all hover:bg-gray-50 hover:border-[#5B47FB]/30\"></button>\n      <img imageFallback src=\"https://logo.clearbit.com/kp.org\" [alt]=\"connectedAccount.display_name\" class=\"w-8 h-8 mx-4 rounded\">\n      <div class=\"flex-1 min-w-0\"><p class=\"font-semibold\">{{connectedAccount.display_name}}</p>\n        <p class=\"text-sm text-gray-600\">Ready to connect</p></div>\n    </div>\n    <!-- pending accounts -->\n    <div *ngFor=\"let pendingAccount of ((configService.vaultProfileConfigSubject | async)?.pendingPatientAccounts || [])\"\n         class=\"flex items-center p-3 border rounded-lg hover:border-[#5B47FB]/30 hover:shadow-sm transition-all\">\n      <div class=\"w-8 h-8 flex items-center justify-center animate-bounce\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"text-amber-500\">\n          <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path>\n          <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n          <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n        </svg>\n      </div>\n      <img imageFallback src=\"https://cdn.fastenhealth.com/logos/sources/{{pendingAccount.brand?.id}}.png\" alt=\"{{pendingAccount.brand?.name}}\" class=\"w-8 max-h-8 mx-3 rounded\">\n      <div class=\"flex-1 min-w-0\"><p class=\"font-semibold\">{{pendingAccount.portal.name}}</p>\n        <p class=\"text-sm text-gray-600\">Sign in required</p>\n      </div>\n      <a\n        [navOutletLink]=\"'health-system-connecting' + pendingAccount.brand?.id + '/' + pendingAccount.portal?.id + '/' + pendingAccount.endpoint?.id\"\n        class=\"border border-[#5B47FB] text-[#5B47FB] hover:bg-[#5B47FB] hover:text-white px-4 py-1.5 rounded-lg text-sm font-medium transition-colors\">\n        Sign in\n      </a>\n    </div>\n  </div>\n\n  <!-- Search button to connect new system -->\n  <button id=\"search-button\"\n          [navOutletLink]=\"'health-system-search'\"\n          class=\"w-full border border-gray-200 rounded-lg flex justify-between items-center px-4 py-3 text-sm font-medium hover:border-[#5B47FB] hover:bg-[#5B47FB]/5 transition-all\">\n    <div class=\"flex items-center gap-2\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n        <path d=\"M21 21l-5.2-5.2m2.2-5.3a7.5 7.5 0 11-15 0 7.5 7.5 0 0115 0z\" stroke-width=\"2\"\n              stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n      </svg>\n      <span>Connect a new health system</span>\n    </div>\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"\n         stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\n         class=\"lucide lucide-chevron-right w-5 h-5 text-gray-400\">\n      <polyline points=\"9 6 15 12 9 18\" />\n    </svg>\n  </button>\n\n  <div class=\"flex items-center justify-between pt-4\">\n    <div class=\"flex items-center gap-2 text-sm text-gray-600\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-lock w-4 h-4\"><rect width=\"18\" height=\"11\" x=\"3\" y=\"11\" rx=\"2\" ry=\"2\"/><path d=\"M7 11V7a5 5 0 0 1 10 0v4\"/></svg>\n      <span>Your medical records are secure</span>\n    </div>\n    <button id=\"connecting-continue\"\n            class=\"bg-[#5B47FB] hover:bg-[#4936E8] text-white py-2 px-4 rounded-md disabled:opacity-50\" disabled>\n      Continue\n    </button>\n  </div>\n</div>\n","import {ChangeDetectorRef, Component, OnInit} from '@angular/core';\nimport {VaultService} from '../../services/vault.service';\nimport {ConfigService} from '../../services/config.service';\nimport {FormHealthSystemRequest} from '../../models/forms/form-health-system-request';\nimport {NavOutletService} from '../../router/nav-outlet/nav-outlet.service';\nimport {ComponentNavPage} from '../../app.routing';\nimport {NavOutletPage} from '../../models/nav-outlet-page';\n\n@Component({\n  selector: 'app-form-health-system-request',\n  templateUrl: './form-health-system-request.component.html',\n  styleUrls: ['./form-health-system-request.component.scss']\n})\nexport class FormHealthSystemRequestComponent implements OnInit, NavOutletPage {\n  formRequestHealthSystem: FormHealthSystemRequest = {} as FormHealthSystemRequest\n\n  loading: boolean = false\n  submitSuccess: boolean = false\n  errorMsg: string = \"\"\n\n  constructor(\n    public changeRef: ChangeDetectorRef,\n    private navOutletService: NavOutletService,\n    private configService: ConfigService,\n    private vaultApi: VaultService,\n  ) { }\n\n  ngOnInit(): void {\n    this.resetForm()\n  }\n  markForCheck(){\n    this.changeRef.markForCheck()\n  }\n  resetForm() {\n    this.submitSuccess = false\n    let requestForm = new FormHealthSystemRequest()\n    requestForm.email = ''\n    requestForm.name = this.configService.searchConfig$.searchFilter?.query || \"\"\n    requestForm.street_address = ''\n    requestForm.website = ''\n\n    this.formRequestHealthSystem = requestForm\n  }\n\n  submitForm() {\n    this.loading = true\n    this.vaultApi.requestHealthSystem(this.formRequestHealthSystem).subscribe((resp: any) => {\n        this.loading = false\n        this.submitSuccess = true\n        //show success toast? close modal?\n      },\n      (err)=>{\n        this.loading = false\n        console.error(\"an error occurred during request submission\",err)\n        this.errorMsg = err || \"An error occurred while submitting your request. Please try again later.\"\n      })\n  }\n\n  dismiss(){\n    // this.messageBus.componentNavigationSubject.next({\n    //   page: ComponentNavPage.Search,\n    // } as ComponentNavigationEvent)\n\n    this.navOutletService.navigateByUrl(ComponentNavPage.Dashboard)\n  }\n}\n","<!-- Step: REQUEST FORM -->\n<div id=\"step-request-form\" class=\"space-y-6\">\n  <div id=\"request-form-nav\" class=\"relative flex justify-center items-center\">\n    <button [navOutletLink]=\"'dashboard'\" type=\"button\" id=\"request-back\"\n            class=\"absolute left-0 top-1/2 -translate-y-1/2 text-gray-700 p-2 hover:bg-gray-100 rounded-md\">\n      <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15 19l-7-7 7-7\" />\n      </svg>\n    </button>\n    <h1 class=\"az-logo\">fasten</h1>\n  </div>\n\n\n  <form id=\"request-form\" class=\"space-y-6\" *ngIf=\"!submitSuccess; else requestSuccess\" (ngSubmit)=\"submitForm()\" #healthSystemRequestForm=\"ngForm\">\n    <div id=\"request-form-header\" class=\"space-y-2\">\n      <h2 class=\"text-xl font-bold\">Request your Health System</h2>\n      <p class=\"text-base text-gray-600\">\n        Sharing your email address and related information helps us prioritize your Health System.\n      </p>\n    </div>\n\n    <div class=\"space-y-4\">\n      <div class=\"space-y-2\">\n        <label class=\"block text-sm font-medium text-gray-700 tracking-tight\">Your email address\n          <span class=\"text-red-500\">*</span></label>\n        <input id=\"request-email\" type=\"email\" placeholder=\"you@example.com\" required email\n               [(ngModel)]=\"formRequestHealthSystem.email\" name=\"email\" #email=\"ngModel\"\n               class=\"block w-full mt-1 px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20 tracking-tight\" />\n        <p *ngIf=\"email.invalid && (email.dirty || email.touched)\" class=\"mt-2 text-sm text-red-600 dark:text-red-500\">\n          <span *ngIf=\"email.errors?.['required']\">\n            Email is required.\n          </span>\n            <span *ngIf=\"email.errors?.['email']\">\n            Email must be valid.\n          </span>\n        </p>\n      </div>\n\n      <div class=\"space-y-2\">\n        <label class=\"block text-sm font-medium text-gray-700 tracking-tight\">Health system name\n          <span class=\"text-red-500\">*</span></label>\n        <input id=\"request-healthsystem\" type=\"text\"\n               placeholder=\"Mayo Clinic, Cleveland Clinic, Kaiser Permanente\"\n               [(ngModel)]=\"formRequestHealthSystem.name\" name=\"name\" #name=\"ngModel\" required minlength=\"4\"\n               class=\"block w-full mt-1 px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20 tracking-tight\" />\n        <p *ngIf=\"name.invalid && (name.dirty || name.touched)\" class=\"mt-2 text-sm text-red-600 dark:text-red-500\">\n        <span *ngIf=\"name.errors?.['required']\">\n          Health system name is required.\n        </span>\n          <span *ngIf=\"name.errors?.['minlength']\">\n          Health system name must be at least 4 characters long.\n        </span>\n        </p>\n      </div>\n\n      <div class=\"space-y-2\">\n        <label class=\"block text-sm font-medium text-gray-700 tracking-tight\">Website <span\n          class=\"text-red-500\">*</span></label>\n        <input id=\"request-website\" type=\"text\" placeholder=\"www.mayoclinic.org\"\n               [(ngModel)]=\"formRequestHealthSystem.website\"name=\"website\" #website=\"ngModel\" required minlength=\"4\"\n               class=\"block w-full mt-1 px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20 tracking-tight\" />\n        <p *ngIf=\"website.invalid && (website.dirty || website.touched)\" class=\"mt-2 text-sm text-red-600 dark:text-red-500\">\n        <span *ngIf=\"website.errors?.['required']\">\n          Website is required.\n        </span>\n          <span *ngIf=\"website.errors?.['minlength']\">\n          Website must be at least 4 characters long.\n        </span>\n        </p>\n      </div>\n    </div>\n\n    <div class=\"space-y-2\">\n      <label class=\"block text-sm font-medium text-gray-700 tracking-tight\">Street Address</label>\n      <input id=\"request-address\" type=\"text\" placeholder=\"123 Broadway, New York, NY\"\n             [(ngModel)]=\"formRequestHealthSystem.street_address\"name=\"website\" #street_address=\"ngModel\"\n             class=\"block w-full mt-1 px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20 tracking-tight\" />\n    </div>\n\n    <p *ngIf=\"errorMsg\" class=\"mt-2 text-sm text-red-600 dark:text-red-500\">\n      <strong>Error</strong> {{errorMsg}}\n    </p>\n\n    <button type=\"submit\"\n      [disabled]=\"!healthSystemRequestForm.form.valid || loading\"\n      class=\"w-full bg-[#5B47FB] hover:bg-[#4936E8] text-white py-2 px-4 rounded-md tracking-tight font-medium flex justify-center items-center\">\n      <app-spinner *ngIf=\"loading\"></app-spinner>\n      Submit\n    </button>\n  </form>\n</div>\n<!-- End Step: REQUEST FORM -->\n\n<ng-template #requestSuccess>\n\n  <!-- Success animation container -->\n  <div id=\"request-success-animation\" class=\" text-center py-16\">\n    <div class=\"w-16 h-16 mx-auto bg-[#5B47FB]/10 rounded-full flex items-center justify-center success-circle\">\n      <svg class=\"w-8 h-8 text-[#5B47FB]\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\"\n           viewBox=\"0 0 24 24\">\n        <path class=\"success-check\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M5 13l4 4L19 7\" />\n      </svg>\n    </div>\n    <div class=\"flex items-center justify-center\">\n\n      <div>\n        <div class=\"text-base text-gray-600 py-5\">\n          Thanks for providing information about your Health System. Your request has been recorded and we will notify you once your Health System is supported.\n        </div>\n        <button (click)=\"dismiss()\" type=\"button\" class=\"py-2 w-full bg-[#5B47FB] hover:bg-[#4936E8] text-white py-2 px-4 rounded-md tracking-tight font-medium\" >\n          Dismiss\n        </button>\n      </div>\n\n    </div>\n  </div>\n\n</ng-template>\n","import {ChangeDetectorRef, Component, OnInit} from '@angular/core';\nimport {FormHealthSystemRequest} from '../../models/forms/form-health-system-request';\nimport {Router} from '@angular/router';\nimport {ConfigService} from '../../services/config.service';\nimport {VaultService} from '../../services/vault.service';\nimport {FormSupportRequest} from '../../models/forms/form-support-request';\nimport {NavOutletService} from '../../router/nav-outlet/nav-outlet.service';\nimport {ComponentNavPage} from '../../app.routing';\nimport {NavOutletPage} from '../../models/nav-outlet-page';\n\n@Component({\n  selector: 'app-form-support-request',\n  templateUrl: './form-support-request.component.html',\n  styleUrls: ['./form-support-request.component.scss']\n})\nexport class FormSupportRequestComponent implements OnInit, NavOutletPage {\n  formSupportRequest: FormSupportRequest = {} as FormSupportRequest\n\n  loading: boolean = false\n  submitSuccess: boolean = false\n  errorMsg: string = \"\"\n\n  constructor(\n    public changeRef: ChangeDetectorRef,\n    private navOutletService: NavOutletService,\n    private configService: ConfigService,\n    private vaultApi: VaultService,\n  ) { }\n\n  ngOnInit(): void {\n    this.resetForm()\n  }\n  markForCheck(){\n    this.changeRef.markForCheck()\n  }\n\n  resetForm() {\n    this.submitSuccess = false\n    let requestForm = new FormSupportRequest()\n    requestForm.email = ''\n    requestForm.healthsystem_name = this.configService.searchConfig$.searchFilter?.query || \"\"\n    requestForm.request_content = ''\n\n    this.formSupportRequest = requestForm\n  }\n\n  submitForm() {\n    this.loading = true\n    this.vaultApi.requestSupport(this.formSupportRequest).subscribe((resp: any) => {\n        this.loading = false\n        this.submitSuccess = true\n        //show success toast? close modal?\n      },\n      (err)=>{\n        this.loading = false\n        console.error(\"an error occurred during issue submission\",err)\n        this.errorMsg = err || \"An error occurred while submitting your issue. Please try again later.\"\n      })\n  }\n\n  dismiss(){\n    // this.messageBus.componentNavigationSubject.next({\n    //   page: ComponentNavPage.Search,\n    // } as ComponentNavigationEvent)\n\n    this.navOutletService.navigateByUrl(ComponentNavPage.Dashboard)\n  }\n\n}\n","<!-- Step: SUPPORT REQUEST FORM -->\n<div id=\"step-request-form\" class=\"space-y-6\">\n  <div id=\"request-form-nav\" class=\"relative flex justify-center items-center\">\n    <button [navOutletLink]=\"'dashboard'\" type=\"button\" id=\"request-back\"\n            class=\"absolute left-0 top-1/2 -translate-y-1/2 text-gray-700 p-2 hover:bg-gray-100 rounded-md\">\n      <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15 19l-7-7 7-7\" />\n      </svg>\n    </button>\n    <h1 class=\"az-logo\">fasten</h1>\n  </div>\n\n\n  <form id=\"request-form\" class=\"space-y-6\" *ngIf=\"!submitSuccess; else requestSuccess\" (ngSubmit)=\"submitForm()\" #supportRequestForm=\"ngForm\">\n    <div id=\"request-form-header\" class=\"space-y-2\">\n      <h2 class=\"text-xl font-bold\">Report an issue</h2>\n      <p class=\"text-base text-gray-600\">\n        Sharing your email address and related information helps us prioritize your issue.\n      </p>\n    </div>\n\n    <div class=\"space-y-4\">\n      <div class=\"space-y-2\">\n        <label class=\"block text-sm font-medium text-gray-700 tracking-tight\">Your email address\n          <span class=\"text-red-500\">*</span></label>\n        <input id=\"request-email\" type=\"email\" placeholder=\"you@example.com\" required\n               class=\"block w-full mt-1 px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20 tracking-tight\" />\n      </div>\n\n      <div class=\"space-y-2\">\n        <label class=\"block text-sm font-medium text-gray-700 tracking-tight\">Health system name\n          <span class=\"text-red-500\">*</span></label>\n        <input id=\"request-healthsystem\" type=\"text\" readonly\n               placeholder=\"Mayo Clinic, Cleveland Clinic, Kaiser Permanente\" required\n               class=\"block w-full mt-1 px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20 tracking-tight\" />\n      </div>\n\n      <div class=\"space-y-2\">\n        <label class=\"block text-sm font-medium text-gray-700 tracking-tight\">Describe your issue<span\n          class=\"text-red-500\">*</span></label>\n        <textarea id=\"request-description\" placeholder=\"please provide as much data as possible, it helps us prioritize your issue\" required\n                  class=\"block w-full mt-1 px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20 tracking-tight\" ></textarea>\n      </div>\n    </div>\n\n    <button type=\"submit\"\n      [disabled]=\"!supportRequestForm.form.valid || loading\"\n      class=\"w-full bg-[#5B47FB] hover:bg-[#4936E8] text-white py-2 px-4 rounded-md tracking-tight font-medium flex justify-center items-center\">\n      <app-spinner *ngIf=\"loading\"></app-spinner>\n      Submit\n    </button>\n  </form>\n</div>\n<!-- End Step: REQUEST FORM -->\n\n<ng-template #requestSuccess>\n\n  <!-- Success animation container -->\n  <div id=\"request-success-animation\" class=\" text-center py-16\">\n    <div class=\"w-16 h-16 mx-auto bg-[#5B47FB]/10 rounded-full flex items-center justify-center success-circle\">\n      <svg class=\"w-8 h-8 text-[#5B47FB]\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\"\n           viewBox=\"0 0 24 24\">\n        <path class=\"success-check\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M5 13l4 4L19 7\" />\n      </svg>\n    </div>\n    <div class=\"flex items-center justify-center\">\n\n      <div>\n        <div class=\"text-base text-gray-600 py-5\">\n          Thanks for providing information about your issue. Your request has been recorded and we will notify you once we have an update.\n        </div>\n        <button (click)=\"dismiss()\" type=\"button\" class=\"py-2 w-full bg-[#5B47FB] hover:bg-[#4936E8] text-white py-2 px-4 rounded-md tracking-tight font-medium\" >\n          Dismiss\n        </button>\n      </div>\n\n    </div>\n  </div>\n\n</ng-template>\n","import {ChangeDetectorRef, Component, Input, OnInit} from '@angular/core';\nimport {\n  LighthouseBrandListDisplayItem, LighthouseEndpointListDisplayItem,\n  LighthousePortalListDisplayItem\n} from '../../models/lighthouse/lighthouse-source-search';\nimport {ConfigService} from '../../services/config.service';\nimport {NavOutletService} from '../../router/nav-outlet/nav-outlet.service';\nimport {ComponentNavPage} from '../../app.routing';\nimport {NavOutletPage} from '../../models/nav-outlet-page';\n\n@Component({\n  selector: 'app-health-system-brand-details',\n  templateUrl: './health-system-brand-details.component.html',\n  styleUrls: ['./health-system-brand-details.component.scss']\n})\nexport class HealthSystemBrandDetailsComponent implements OnInit, NavOutletPage {\n\n  @Input() brand!: LighthouseBrandListDisplayItem;\n\n  constructor(\n    public changeRef: ChangeDetectorRef,\n    public configService: ConfigService,\n    public navOutletService: NavOutletService\n  ) {\n    this.brand = configService.searchConfig$.selectedBrand!\n  }\n\n  ngOnInit(): void {\n  }\n  markForCheck(){\n    this.changeRef.markForCheck()\n  }\n\n  addPendingAccount(brand: LighthouseBrandListDisplayItem, portal: LighthousePortalListDisplayItem, endpoint: LighthouseEndpointListDisplayItem){\n    console.log(\"addPendingAccount\")\n    this.configService.vaultProfileAddPendingAccount(brand, portal, endpoint)\n    this.navOutletService.navigateByUrl(ComponentNavPage.Dashboard)\n  }\n}\n","<!-- Step: HEALTH SYSTEM DETAILS -->\n<div id=\"step-health-system-details\" class=\"space-y-6\">\n  <div class=\"relative flex justify-center items-center\">\n    <button [navOutletLink]=\"'health-system-search'\" type=\"button\" id=\"hsd-back\"\n            class=\"absolute left-0 top-1/2 -translate-y-1/2 text-gray-700 p-2 hover:bg-gray-100 rounded-md\">\n      <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15 19l-7-7 7-7\" />\n      </svg>\n    </button>\n    <h1 class=\"az-logo\">fasten</h1>\n  </div>\n\n  <div class=\"space-y-6\">\n    <!-- Health System Brand Card -->\n    <div class=\"border rounded-2xl p-6\">\n      <div class=\"flex items-start space-x-4 mb-4\">\n        <div class=\"flex-shrink-0\">\n          <img class=\"w-12 max-h-12 rounded-lg object-contain\" imageFallback src=\"https://cdn.fastenhealth.com/logos/sources/{{brand.id}}.png\">\n        </div>\n        <div class=\"flex-1 min-w-0\">\n          <h2 id=\"hsd-name\" class=\"text-xl font-semibold\">{{brand.name}}</h2>\n        </div>\n      </div>\n\n      <p id=\"hsd-description\" class=\"text-gray-600 text-base mb-4\"></p>\n\n      <div class=\"space-y-2\">\n        <div *ngIf=\"brand.brand_website\" class=\"flex items-center gap-2 text-gray-600\" id=\"hsd-website-container\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"\n               stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\n               class=\"lucide lucide-globe w-5 h-5\">\n            <circle cx=\"12\" cy=\"12\" r=\"10\" />\n            <path d=\"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20\" />\n            <path d=\"M2 12h20\" />\n          </svg>\n          <a id=\"hsd-website\" class=\"text-base hover:underline\" [href]=\"brand.brand_website\" target=\"_blank\" rel=\"noopener noreferrer\">{{brand.brand_website}}</a>\n        </div>\n        <div *ngIf=\"brand.portals\" class=\"flex items-center gap-2 text-gray-600\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"\n               stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\n               class=\"lucide lucide-map-pin w-5 h-5\">\n            <path d=\"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0\" />\n            <circle cx=\"12\" cy=\"10\" r=\"3\" />\n          </svg>\n          <span id=\"hsd-location\" class=\"text-base\">{{brand.locations}}</span>\n        </div>\n      </div>\n    </div>\n\n    <!-- Institutions List -->\n    <div class=\"space-y-2\" id=\"hsd-institutions-list\">\n      <ng-container *ngFor=\"let portal of brand.portals\">\n        <div *ngFor=\"let endpoint of portal.endpoints\" class=\"p-4 border rounded-lg hover:border-gray-400 transition-colors\">\n          <div class=\"flex items-center justify-between\">\n            <h4 class=\"font-medium text-base tracking-tight\">{{portal.name}}</h4>\n            <button (click)=\"addPendingAccount(brand, portal, endpoint)\" type=\"button\" class=\"border border-[#5B47FB] text-[#5B47FB] hover:bg-[#5B47FB] hover:text-white w-8 h-8 rounded-lg text-lg font-medium transition-colors flex items-center justify-center\">+</button>\n          </div>\n        </div>\n      </ng-container>\n    </div>\n  </div>\n</div>\n<!-- End Step: HEALTH SYSTEM DETAILS -->\n","import {ChangeDetectorRef, Component, Input, OnInit} from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {ConnectHelper} from '../../utils/connect-helper';\nimport {VaultService} from '../../services/vault.service';\nimport {ConfigService} from '../../services/config.service';\nimport {NavOutletService} from '../../router/nav-outlet/nav-outlet.service';\nimport {NavOutletPage} from '../../models/nav-outlet-page';\n\n@Component({\n  selector: 'app-health-system-connecting',\n  templateUrl: './health-system-connecting.component.html',\n  styleUrls: ['./health-system-connecting.component.scss']\n})\nexport class HealthSystemConnectingComponent implements OnInit, NavOutletPage {\n  @Input() brandId: string = \"\";\n  @Input() portalId: string = \"\";\n  @Input() endpointId: string = \"\";\n\n\n  constructor(\n    public changeRef: ChangeDetectorRef,\n    private route: ActivatedRoute,\n    private vaultService: VaultService,\n    private configService: ConfigService,\n    private navOutletService: NavOutletService,\n  ){\n    this.route.params.subscribe((params) => {\n      this.brandId = params['brandId'];\n      this.portalId = params['portalId'];\n      this.endpointId = params['endpointId'];\n    });\n\n  }\n\n  ngOnInit(): void {\n\n    ConnectHelper(this.vaultService, this.navOutletService, {\n      public_id: this.configService.systemConfig$.publicId,\n      catalog_brand_id: this.brandId,\n      catalog_portal_id: this.portalId,\n      catalog_endpoint_id: this.endpointId,\n      // org_connection_id: this.reconnectOrgConnectionId,\n      // external_id: this.externalId,\n      // external_state: this.externalState,\n      // connect_mode: this.connectMode,\n    })\n  }\n  markForCheck(){\n    this.changeRef.markForCheck()\n  }\n\n}\n","<!-- Redirect Overlay -->\n<div class=\"space-y-6\">\n  <div id=\"request-form-nav\" class=\"relative flex justify-center items-center\">\n    <button [navOutletLink]=\"'dashboard'\" type=\"button\" id=\"request-back\"\n            class=\"absolute left-0 top-1/2 -translate-y-1/2 text-gray-700 p-2 hover:bg-gray-100 rounded-md\">\n      <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15 19l-7-7 7-7\" />\n      </svg>\n    </button>\n    <h1 class=\"az-logo\">fasten</h1>\n  </div>\n  <div id=\"redirect-overlay\" class=\"flex items-center justify-center z-50 redirect-overlay-enter\">\n    <div class=\"bg-white rounded-2xl p-8 w-[90%] max-w-[360px] relative redirect-overlay-content\">\n\n\n      <div class=\"relative w-24 h-24 mx-auto mb-8 redirect-logo-container\">\n        <div class=\"absolute inset-0 bg-white rounded-2xl shadow-sm p-4\">\n          <img imageFallback src=\"https://cdn.fastenhealth.com/logos/sources/{{brandId}}.png\" alt=\"\" class=\"w-full h-full object-contain\" />\n        </div>\n      </div>\n\n      <div class=\"text-center space-y-3\">\n        <h3 id=\"redirect-name\" class=\"text-xl font-semibold text-gray-900\"></h3>\n        <p id=\"redirect-website\" class=\"text-sm text-gray-500\" style=\"display: none;\"></p>\n\n        <div class=\"bg-[#5B47FB]/5 rounded-xl p-4 mt-6\">\n          <div class=\"redirect-dots\">\n            <div class=\"redirect-dot\"></div>\n            <div class=\"redirect-dot\"></div>\n            <div class=\"redirect-dot\"></div>\n          </div>\n          <p class=\"text-sm text-gray-600\">Redirecting to sign in...</p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>\n","import {ChangeDetectorRef, Component, Input, OnInit} from '@angular/core';\nimport {SourceListItem} from '../../models/source-list-item';\nimport {\n  LighthouseBrandListDisplayItem,\n  LighthouseSourceSearch,\n  LighthouseSourceSearchAggregation\n} from '../../models/lighthouse/lighthouse-source-search';\nimport {Observable, of} from 'rxjs';\nimport {SearchFilter} from '../../models/search-filter';\nimport {VaultService} from '../../services/vault.service';\nimport {ConfigService} from '../../services/config.service';\nimport {NavOutletService} from '../../router/nav-outlet/nav-outlet.service';\nimport {ComponentNavPage} from '../../app.routing';\nimport {NavOutletPage} from '../../models/nav-outlet-page';\n\n@Component({\n  selector: 'app-health-system-search',\n  templateUrl: './health-system-search.component.html',\n  styleUrls: ['./health-system-search.component.scss']\n})\nexport class HealthSystemSearchComponent implements OnInit, NavOutletPage {\n  loading = false;\n  lighthouseBrandList: SourceListItem[] = []\n\n  filter: SearchFilter = new SearchFilter()\n\n  //limits that are tied to the current result set.\n  resultLimits: {\n    totalItems: number,\n    scrollComplete: boolean,\n    platformTypesBuckets: LighthouseSourceSearchAggregation | undefined,\n    categoryBuckets: LighthouseSourceSearchAggregation | undefined,\n  } = {\n    totalItems: 0,\n    scrollComplete: false,\n    platformTypesBuckets: undefined,\n    categoryBuckets: undefined\n  }\n\n  constructor(\n    public changeRef: ChangeDetectorRef,\n    public vaultServiceApi: VaultService,\n    public configService: ConfigService,\n    public navOutletService: NavOutletService\n  ) { }\n\n  ngOnInit(): void {\n    this.querySources(true)\n  }\n  markForCheck(){\n    this.changeRef.markForCheck()\n  }\n\n  public querySources(reset: boolean): Observable<LighthouseSourceSearch|null> {\n    if(reset){\n      this.resetSearch()\n    }\n\n    console.log(\"querySources()\", this.filter)\n    if(this.loading){\n      console.log(\"already loading, ignoring querySources()\")\n      return of(null)\n    }\n    //TODO: pass filter to function.\n    // this.location.replaceState('/dashboard','', this.filter)\n\n    if(!this.filter){\n      this.filter = new SearchFilter()\n      console.log(\"querySources() - no filter provided, using current form value\", this.filter)\n    }\n\n\n    this.filter.fields = [\"*\"];\n    this.loading = true\n    var searchObservable = this.vaultServiceApi.searchCatalogBrands(this.configService.systemConfig$.apiMode!, this.filter);\n    searchObservable.subscribe(wrapper => {\n        console.log(\"search sources\", wrapper);\n        // this.searchResults = wrapper.hits.hits;\n        this.resultLimits.totalItems = wrapper?.hits?.total.value || 0;\n\n        this.lighthouseBrandList = this.lighthouseBrandList.concat((wrapper?.hits?.hits || []).map((result) => {\n          return {\n            brand: result._source,\n            searchHighlights: result?.highlight?.aliases || []\n          }\n        }))\n\n        //check if scroll is complete.\n        if(!wrapper?.hits || !wrapper?.hits?.hits || wrapper?.hits?.hits?.length == 0 || wrapper?.hits?.total?.value == wrapper?.hits?.hits?.length){\n          console.log(\"SCROLL_COMPLETE!@@@@@@@@\")\n          this.resultLimits.scrollComplete = true;\n        } else {\n          //change the current Page (but don't cause a new query)\n          console.log(\"SETTING NEXT SORT KEY:\", wrapper.hits.hits[wrapper.hits.hits.length - 1].sort.join(','))\n          this.filter.searchAfter = wrapper.hits.hits[wrapper.hits.hits.length - 1].sort.join(\",\")\n        }\n        this.loading = false\n      },\n      error => {\n        this.loading = false\n        console.error(\"sources FAILED\", error)\n      },\n      () => {\n        this.loading = false\n        console.log(\"sources finished\")\n      }\n    );\n    return searchObservable;\n  }\n\n  onScroll() {\n    if(!this.resultLimits.scrollComplete) {\n      this.querySources(false)\n    }\n  }\n\n  private resetSearch(){\n    console.log(\"reset search...\")\n    this.lighthouseBrandList = []\n    this.filter.searchAfter = []\n    this.resultLimits = {\n      totalItems: 0,\n      scrollComplete: false,\n      platformTypesBuckets: undefined,\n      categoryBuckets: undefined\n    }\n  }\n\n  public selectBrand(brandItem?: LighthouseBrandListDisplayItem){\n\n    this.configService.searchConfig$.selectedBrand = brandItem\n    this.navOutletService.navigateByUrl(ComponentNavPage.HealthSystemBrandDetails)\n    // this.messageBus.componentNavigationSubject.next({\n    //   page: ComponentNavPage.PortalConnect,\n    //   title: brandItem.name,\n    //   data: brandItem,\n    // } as ComponentNavigationEvent)\n  }\n}\n","<!-- Step: SEARCH VIEW -->\n<div id=\"step-search\" class=\"space-y-6\">\n  <div class=\"relative flex justify-center items-center\">\n    <button [navOutletLink]=\"'dashboard'\"  type=\"button\" id=\"search-back\"\n            class=\"absolute left-0 top-1/2 -translate-y-1/2 text-gray-700 p-2 hover:bg-gray-100 rounded-md\">\n      <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15 19l-7-7 7-7\" />\n      </svg>\n    </button>\n    <h1 class=\"az-logo\">fasten</h1>\n  </div>\n\n  <div class=\"flex gap-2\">\n    <div class=\"flex-1\">\n      <input id=\"search-input\" type=\"text\" placeholder=\"Search for your health system...\"\n             [(ngModel)]=\"filter.query\"\n             (keyup)=\"querySources(true)\"\n             class=\"w-full block px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20\" />\n    </div>\n    <button id=\"search-filters\" class=\"border border-gray-200 rounded-lg w-10 h-10 flex items-center justify-center hover:border-[#5B47FB] hover:bg-[#5B47FB]/5 transition-all\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"\n           stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\n           class=\"lucide lucide-filter w-5 h-5\">\n        <polygon points=\"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\" />\n      </svg>\n    </button>\n  </div>\n\n  <!-- Filter container -->\n  <div id=\"filters-container\" class=\"hidden space-y-4 p-4 border rounded-lg\">\n    <h3 class=\"font-semibold text-lg\">Filters</h3>\n\n    <!-- State filter -->\n    <div class=\"relative\">\n      <label class=\"block text-sm font-medium mb-1\">State</label>\n      <button type=\"button\" id=\"state-filter-btn\"\n              class=\"w-full flex items-center justify-between px-3 py-2 text-sm border rounded-md bg-white hover:bg-gray-50\">\n        <span id=\"state-filter-value\">All States</span>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"\n             stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\n             class=\"h-4 w-4 opacity-50\">\n          <polyline points=\"6 9 12 15 18 9\" />\n        </svg>\n      </button>\n      <div id=\"state-filter-menu\" class=\"absolute z-10 w-full mt-1 rounded-md border bg-white shadow-lg hidden\">\n        <div class=\"py-1\">\n          <button class=\"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center justify-between\">\n            <span>All States</span>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-4 h-4 text-[#5B47FB]\">\n              <polyline points=\"20 6 9 17 4 12\"/>\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Type filter -->\n    <div class=\"relative\">\n      <label class=\"block text-sm font-medium mb-1\">Institution Type</label>\n      <button type=\"button\" id=\"type-filter-btn\"\n              class=\"w-full flex items-center justify-between px-3 py-2 text-sm border rounded-md bg-white hover:bg-gray-50\">\n        <span id=\"type-filter-value\">All Types</span>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"\n             stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\n             class=\"h-4 w-4 opacity-50\">\n          <polyline points=\"6 9 12 15 18 9\" />\n        </svg>\n      </button>\n      <div id=\"type-filter-menu\" class=\"absolute z-10 w-full mt-1 rounded-md border bg-white shadow-lg hidden\">\n        <div class=\"py-1\">\n          <button class=\"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center justify-between\">\n            <span>All Types</span>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-4 h-4 text-[#5B47FB]\">\n              <polyline points=\"20 6 9 17 4 12\"/>\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Search results container -->\n  <div class=\"space-y-2 overflow-scroll\" style=\"max-height:500px\" id=\"search-results\"\n       infiniteScroll\n       [infiniteScrollDistance]=\"2\"\n       [infiniteScrollThrottle]=\"50\"\n       [scrollWindow]=\"false\"\n       (scrolled)=\"onScroll()\"\n  >\n\n    <button *ngFor=\"let brand of lighthouseBrandList\" type=\"button\"\n            (click)=\"selectBrand(brand.brand)\"\n            class=\"w-full flex items-center gap-3 p-3 border rounded-lg hover:border-[#5B47FB]/30 hover:shadow-sm transition-all text-left focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20\">\n      <img imageFallback src=\"https://cdn.fastenhealth.com/logos/sources/{{brand?.brand?.id}}.png\" alt=\"{{brand?.brand?.name}}\" class=\"w-8 max-h-8 rounded\">\n      <div class=\"flex-1 min-w-0\">\n        <p class=\"font-semibold\">{{brand?.brand?.name}}</p>\n        <p *ngIf=\"(brand?.searchHighlights || []).length > 0\" class=\"text-sm text-gray-600\">Found match(es):\n          <span *ngFor=\"let highlight of brand?.searchHighlights\" [innerHTML]=\"highlight | safeHtml\"></span>\n        </p>\n        <p class=\"text-sm text-gray-600\">New Jersey, New York, California</p></div>\n      <div class=\"flex items-center\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"\n             stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\n             class=\"w-5 h-5 text-gray-400\">\n          <polyline points=\"9 6 15 12 9 18\"></polyline>\n        </svg>\n      </div>\n    </button>\n\n  </div>\n\n  <div *ngIf=\"!loading && lighthouseBrandList.length == 0\" class=\"text-center py-8 space-y-4\">\n    <div class=\"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-8 h-8 text-gray-400\">\n        <circle cx=\"11\" cy=\"11\" r=\"8\"/>\n        <path d=\"m21 21-4.3-4.3\"/>\n      </svg>\n    </div>\n    <h3 class=\"text-lg font-semibold\">No results found</h3>\n    <p class=\"text-gray-600\">We couldn't find any health systems matching your search.</p>\n    <button [navOutletLink]=\"'form-health-system-request'\" id=\"request-health-system\" class=\"text-[#5B47FB] hover:text-[#4936E8] hover:bg-[#5B47FB]/5 rounded-md px-4 py-2 transition-colors mt-2\">Request this health system</button>\n  </div>\n\n</div>\n<!-- End Step: SEARCH VIEW -->\n","import {ChangeDetectorRef, Component, OnInit} from '@angular/core';\nimport {VaultService} from '../../services/vault.service';\nimport {NavOutletService} from '../../router/nav-outlet/nav-outlet.service';\nimport {ComponentNavPage} from '../../app.routing';\nimport {NavOutletPage} from '../../models/nav-outlet-page';\n\n@Component({\n  selector: 'app-identity-verification',\n  templateUrl: './identity-verification.component.html',\n  styleUrls: ['./identity-verification.component.scss']\n})\nexport class IdentityVerificationComponent implements OnInit, NavOutletPage {\n  loading = false;\n\n  constructor(\n    public changeRef: ChangeDetectorRef,\n    private vaultService: VaultService,\n    private navOutletService: NavOutletService,\n  ) { }\n\n  ngOnInit(): void {\n  }\n  markForCheck(){\n    this.changeRef.markForCheck()\n  }\n\n  verifyIdentity(){\n    this.loading = true\n    this.vaultService.verificationWithPopup().subscribe((result)=>{\n      this.loading = false\n      console.log(\"verification result\", result)\n      this.navOutletService.navigateByUrl(ComponentNavPage.Dashboard)\n    }, (err)=>{\n      this.loading = false\n      console.error(\"verification error\", err)\n    })\n  }\n}\n","<!-- Step: VERIFICATION -->\n<div class=\"space-y-6 text-center\">\n  <div class=\"flex justify-center items-center\">\n    <h1 class=\"az-logo\">fasten</h1>\n  </div>\n\n  <div class=\"space-y-2\">\n    <h2 class=\"text-xl font-semibold\">\n      Verify your identity<br/>just once\n    </h2>\n    <p id=\"verification-hint\" class=\"text-sm text-gray-600\">\n      Your leaving Acme Labs to verify your identity with our partner, Clear.\n      This one-time step will bring you right back after your ID has been verified.\n    </p>\n  </div>\n\n\n  <div class=\"space-y-2\">\n    <button (click)=\"verifyIdentity()\"\n      [disabled]=\"loading\"\n      type=\"button\" class=\"w-full bg-[#5B47FB] hover:bg-[#4936E8] text-white font-medium py-2.5 px-4 rounded-md flex justify-center items-center\">\n      <app-spinner *ngIf=\"loading\"></app-spinner>\n      Continue\n    </button>\n  </div>\n</div>\n<!-- End Step: VERIFICATION -->\n","import {ChangeDetectorRef, Component, Input, OnInit} from '@angular/core';\nimport {AuthService} from '../../services/auth.service';\nimport {NavOutletService} from '../../router/nav-outlet/nav-outlet.service';\nimport {ComponentNavPage} from '../../app.routing';\nimport {NavOutletPage} from '../../models/nav-outlet-page';\n\n@Component({\n  selector: 'app-vault-profile-signin-code',\n  templateUrl: './vault-profile-signin-code.component.html',\n  styleUrls: ['./vault-profile-signin-code.component.scss']\n})\nexport class VaultProfileSigninCodeComponent implements OnInit, NavOutletPage {\n  loading: boolean = false\n  errorMsg: string = \"\"\n\n  @Input() currentEmail = \"test@example.com\"\n\n  constructor(\n    public changeRef: ChangeDetectorRef,\n    private navOutletService: NavOutletService,\n    private authService: AuthService,\n  ) {}\n\n  ngOnInit(): void {\n  }\n  markForCheck(){\n    this.changeRef.markForCheck()\n  }\n\n  onCodeCompleted(code: string){\n    this.loading = true\n\n    console.log(\"submit finish\", this.currentEmail, code)\n    this.authService.VaultAuthFinish(this.currentEmail, code)\n      .then(() => {\n        this.loading = false\n        this.navOutletService.navigateByUrl(ComponentNavPage.Dashboard)\n      })\n      .catch((err)=>{\n        this.loading = false\n        if(err?.name){\n          this.errorMsg = \"code is incorrect\"\n        } else{\n          this.errorMsg = \"an unknown error occurred during sign-in\"\n        }\n        // const toastNotification = new ToastNotification()\n        // toastNotification.type = ToastType.Error\n        // toastNotification.message = this.errorMsg\n        // this.toastService.show(toastNotification)\n      })\n  }\n\n}\n","<!-- Step: VERIFICATION -->\n<div class=\"space-y-6 text-center\">\n  <div class=\"flex justify-center items-center\">\n    <h1 class=\"az-logo\">fasten</h1>\n  </div>\n\n  <div class=\"space-y-2\">\n    <h2 class=\"text-xl font-semibold\">\n      Enter authentication code<br />from your email\n    </h2>\n    <p id=\"verification-hint\" class=\"text-sm text-gray-600\">\n      A code was sent to <span>{{currentEmail}}</span>\n    </p>\n  </div>\n\n  <div class=\"flex justify-center space-x-2\" id=\"verification-inputs\">\n    <code-input [isCodeHidden]=\"false\"\n                [codeLength]=\"6\"\n                (codeCompleted)=\"onCodeCompleted($event)\">\n    </code-input>\n  </div>\n\n  <p id=\"verification-error\" class=\"text-sm text-red-500\" style=\"display: none;\"></p>\n\n  <div class=\"text-sm text-gray-600\">\n    Code expires in\n    <span id=\"verification-countdown\" class=\"font-semibold text-gray-900\">4:59</span>\n  </div>\n\n  <div class=\"space-y-2\">\n    <button type=\"button\" id=\"resend-code\"\n            class=\"verification-button\">\n      Re-send code\n    </button>\n    <button type=\"button\" id=\"use-other-method\"\n            class=\"verification-button\">\n      Use another verification method\n    </button>\n  </div>\n</div>\n<!-- End Step: VERIFICATION -->\n","import {ChangeDetectorRef, Component, OnInit} from '@angular/core';\nimport {VaultProfile} from '../../models/fasten/vaultProfile';\nimport {AuthService} from '../../services/auth.service';\nimport {NavOutletService} from '../../router/nav-outlet/nav-outlet.service';\nimport {ComponentNavPage} from '../../app.routing';\nimport {NavOutletPage} from '../../models/nav-outlet-page';\n\n@Component({\n  selector: 'app-auth-signin',\n  templateUrl: './vault-profile-signin.component.html',\n  styleUrls: ['./vault-profile-signin.component.scss']\n})\nexport class VaultProfileSigninComponent implements OnInit, NavOutletPage {\n  loading: boolean = false\n  showMessage: boolean = false\n\n  submitted: boolean = false\n  existingVaultProfile: VaultProfile = new VaultProfile()\n  errorMsg: string = \"\"\n  message: string = \"\"\n\n  constructor(\n    public changeRef: ChangeDetectorRef,\n    private authService: AuthService,\n    private navOutletService: NavOutletService,\n  ) { }\n\n  ngOnInit(): void {\n    const urlParams = new URLSearchParams(window.location.search);\n    this.setMessage(urlParams.get('action') || \"\")\n  }\n  markForCheck(){\n    this.changeRef.markForCheck()\n  }\n\n  signinSubmit(){\n    this.submitted = true;\n    this.loading = true\n\n    console.log(\"Signin\", this.existingVaultProfile.email)\n    this.authService.VaultAuthBegin(this.existingVaultProfile.email!)\n      .then(() => {\n        this.loading = false\n        this.navOutletService.navigateByUrl( ComponentNavPage.VaultProfileSigninCode, new Map<string,any>([[\"currentEmail\", this.existingVaultProfile.email]]))\n      })\n      .catch((err)=>{\n        this.loading = false\n        if(err?.name){\n          this.errorMsg = \"email or password is incorrect\"\n        } else{\n          this.errorMsg = \"an unknown error occurred during sign-in\"\n        }\n        // const toastNotification = new ToastNotification()\n        // toastNotification.type = ToastType.Error\n        // toastNotification.message = this.errorMsg\n        // this.toastService.show(toastNotification)\n      })\n  }\n\n  setMessage(action: string) {\n    if (action === \"email-changed\"){\n      this.showMessage = true;\n      this.message = \"Email successfully changed! Please sign in with your new email.\";\n    } else if (action === \"password-changed\"){\n      this.showMessage = true;\n      this.message = \"Password successfully changed! Please sign in with your new password.\";\n    }\n  }\n}\n","<!-- Step: INITIAL -->\n<div id=\"step-initial\" class=\"space-y-6\">\n  <div class=\"flex justify-center items-center\">\n    <h1 class=\"az-logo\">fasten</h1>\n  </div>\n\n  <div class=\"flex items-center justify-center space-x-4\">\n    <div class=\"w-10 h-10 text-[#5B47FB]\">\n      <svg viewBox=\"0 0 40 40\" fill=\"none\">\n        <rect width=\"40\" height=\"40\" rx=\"8\" fill=\"currentColor\" />\n        <path d=\"M20 12V28M12 20H28\" stroke=\"white\" stroke-width=\"3\" stroke-linecap=\"round\"\n              stroke-linejoin=\"round\" />\n        <path d=\"M12 12L28 28M28 12L12 28\" stroke=\"white\" stroke-width=\"3\" stroke-linecap=\"round\"\n              stroke-linejoin=\"round\" opacity=\"0.2\" />\n      </svg>\n    </div>\n\n    <div class=\"flex space-x-1\">\n      <div class=\"w-2 h-2 bg-[#5B47FB] rounded-full animate-pulse-flow delay-100\"></div>\n      <div class=\"w-2 h-2 bg-[#5B47FB] rounded-full animate-pulse-flow delay-200\"></div>\n      <div class=\"w-2 h-2 bg-[#5B47FB] rounded-full animate-pulse-flow delay-300\"></div>\n    </div>\n\n    <img src=\"https://logo.clearbit.com/fastenhealth.com\" alt=\"Fasten Health Logo\" class=\"w-10 h-10 rounded-lg\"\n         onerror=\"this.outerHTML='<svg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'24\\' height=\\'24\\' viewBox=\\'0 0 24 24\\' fill=\\'none\\' stroke=\\'currentColor\\' stroke-width=\\'2\\' stroke-linecap=\\'round\\' stroke-linejoin=\\'round\\' class=\\'lucide lucide-hospital w-10 h-10\\'><path d=\\'M12 6v4\\'/><path d=\\'M14 14h-4\\'/><path d=\\'M14 18h-4\\'/><path d=\\'M14 8h-4\\'/><path d=\\'M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2\\'/><path d=\\'M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18\\'/></svg>'\" />\n  </div>\n\n  <div class=\"text-center space-y-2\">\n    <h2 class=\"text-xl font-bold\">Connect Your Health Records</h2>\n    <p class=\"text-sm text-gray-600\">\n      Acme Labs uses Fasten to securely link your health systems\n    </p>\n  </div>\n\n  <div class=\"space-y-4\">\n    <!-- Safe Card -->\n    <div class=\"flex items-start space-x-4 p-4 border rounded-lg hover:shadow-sm transition-shadow hover:border-[#5B47FB]/30\">\n      <div class=\"p-2 bg-purple-50 rounded-full\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"\n             stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\n             class=\"lucide lucide-shield w-5 h-5 text-[#5B47FB]\">\n          <path d=\"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01\n                C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1\n                c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0\n                C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\" />\n        </svg>\n      </div>\n      <div>\n        <h3 class=\"font-semibold\">Safe</h3>\n        <p class=\"text-sm text-gray-600\">\n          Securely connect your medical records with bank-level encryption\n        </p>\n      </div>\n    </div>\n\n    <!-- Private Card -->\n    <div class=\"flex items-start space-x-4 p-4 border rounded-lg hover:shadow-sm transition-shadow hover:border-[#5B47FB]/30\">\n      <div class=\"p-2 bg-purple-50 rounded-full\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-lock w-5 h-5 text-[#5B47FB]\"><rect width=\"18\" height=\"11\" x=\"3\" y=\"11\" rx=\"2\" ry=\"2\"/><path d=\"M7 11V7a5 5 0 0 1 10 0v4\"/></svg>\n      </div>\n      <div>\n        <h3 class=\"font-semibold\">Private</h3>\n        <p class=\"text-sm text-gray-600\">\n          We never sell your personal info and only use it with your\n          permission\n        </p>\n      </div>\n    </div>\n  </div>\n\n  <form (ngSubmit)=\"signinSubmit()\" #vaultProfileForm=\"ngForm\" class=\"space-y-6\">\n    <label class=\"block text-sm font-medium text-gray-700\">Email address</label>\n    <input [(ngModel)]=\"existingVaultProfile.email\" name=\"email\" #email=\"ngModel\" required email minlength=\"4\" type=\"email\" placeholder=\"you@example.com\"\n           class=\"block w-full mt-2 px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20\"/>\n    <p id=\"initialError\" class=\"text-sm text-red-500\" *ngIf=\"email.invalid && (email.dirty || email.touched)\">\n        <span *ngIf=\"email.errors?.['required']\">\n          Email is required.\n        </span>\n      <span *ngIf=\"email.errors?.['minlength']\">\n          Email must be at least 4 characters long.\n        </span>\n      <span *ngIf=\"email.errors?.['email']\">\n          Email must be a valid email address.\n        </span>\n      <span *ngIf=\"errorMsg\" class=\"alert alert-danger mt-3\" role=\"alert\">\n          <strong>Error</strong> {{errorMsg}}\n        </span>\n    </p>\n\n    <p class=\"text-xs text-gray-400 text-center\">\n      By clicking continue you agree to Fasten's\n      <a href=\"#\" class=\"text-gray-500 hover:text-gray-600 underline\">Privacy Policy</a>\n      and Acme Labs'\n      <a href=\"#\" class=\"text-gray-500 hover:text-gray-600 underline\">Privacy Policy</a>\n    </p>\n\n    <button type=\"submit\"\n      [disabled]=\"!vaultProfileForm.form.valid || loading\"\n      class=\"w-full bg-[#5B47FB] hover:bg-[#4936E8] text-white font-medium py-2.5 px-4 rounded-md flex justify-center items-center\">\n      <app-spinner *ngIf=\"loading\"></app-spinner>\n      Continue\n    </button>\n\n  </form>\n</div>\n<!-- End Step: INITIAL -->\n\n<!--<section class=\"step-panel showing\" id=\"step-initial\">-->\n<!--  <div class=\"brand-header brand-fast\">-->\n<!--    <h1 class=\"brand-title\">fasten</h1>-->\n<!--  </div>-->\n<!--  <div class=\"initial-view-content\">-->\n<!--    <div class=\"logos-row\">-->\n<!--      <div class=\"medical-logo\">-->\n<!--        <svg width=\"40\" height=\"40\" viewBox=\"0 0 40 40\" fill=\"none\">-->\n<!--          <rect width=\"40\" height=\"40\" rx=\"8\" fill=\"#5B47FB\"></rect>-->\n<!--          <path d=\"M20 12V28M12 20H28\" stroke=\"white\" stroke-width=\"3\" stroke-linecap=\"round\"-->\n<!--                stroke-linejoin=\"round\"></path>-->\n<!--          <path d=\"M12 12L28 28M28 12L12 28\" stroke=\"white\" stroke-width=\"3\" stroke-linecap=\"round\"-->\n<!--                stroke-linejoin=\"round\" opacity=\"0.2\"></path>-->\n<!--        </svg>-->\n<!--      </div>-->\n<!--      <div class=\"bubbles-row\">-->\n<!--        <div class=\"bubble\"></div>-->\n<!--        <div class=\"bubble\"></div>-->\n<!--        <div class=\"bubble\"></div>-->\n<!--      </div>-->\n<!--      <div class=\"clearbit-logo-container\">-->\n<!--        <img src=\"assets/images/banner-transparent-trim.png\" alt=\"Fasten Connect\" class=\"clearbit-logo\" />-->\n<!--      </div>-->\n<!--    </div>-->\n\n<!--    <h2 class=\"title-large\">Connect Your Health Records</h2>-->\n<!--    <p class=\"paragraph\">Acme Labs uses Fasten to securely link your health systems</p>-->\n\n<!--    <div class=\"info-cards\">-->\n<!--      <div class=\"info-card\">-->\n<!--        <div class=\"info-card-icon\">-->\n<!--          <div class=\"icon-wrapper bg-brand-purple-faded\">-->\n<!--            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon-shield\" viewBox=\"0 0 24 24\" fill=\"none\">-->\n<!--              <path d=\"M12 2L3 5V11C3 16.52 7.03 21.75 12 23C16.97 21.75 21 16.52 21 11V5L12 2Z\" stroke=\"#5B47FB\"-->\n<!--                    stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />-->\n<!--            </svg>-->\n<!--          </div>-->\n<!--        </div>-->\n<!--        <div>-->\n<!--          <h3 class=\"info-title\">Safe</h3>-->\n<!--          <p class=\"info-desc\">-->\n<!--            Securely connect your medical records with bank-level encryption-->\n<!--          </p>-->\n<!--        </div>-->\n<!--      </div>-->\n\n<!--      <div class=\"info-card\">-->\n<!--        <div class=\"info-card-icon\">-->\n<!--          <div class=\"icon-wrapper bg-brand-purple-faded\">-->\n<!--            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon-lock\" viewBox=\"0 0 24 24\" fill=\"none\">-->\n<!--              <path-->\n<!--                d=\"M16 10V7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7V10M6 10H18C19.1 10 20 10.9 20 12V19C20 20.1 19.1 21 18 21H6C4.9 21 4 20.1 4 19V12C4 10.9 4.9 10 6 10Z\"-->\n<!--                stroke=\"#5B47FB\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />-->\n<!--            </svg>-->\n<!--          </div>-->\n<!--        </div>-->\n<!--        <div>-->\n<!--          <h3 class=\"info-title\">Private</h3>-->\n<!--          <p class=\"info-desc\">-->\n<!--            We never sell your personal info and only use it with your permission-->\n<!--          </p>-->\n<!--        </div>-->\n<!--      </div>-->\n<!--    </div>-->\n\n<!--    -->\n<!--  </div>-->\n<!--</section>-->\n\n<!--<div *ngIf=\"showMessage\" class=\"az-signin-message\">-->\n<!--  {{message}}-->\n<!--</div>-->\n\n\n<!--      <form (ngSubmit)=\"signinSubmit()\" #vaultProfileForm=\"ngForm\">-->\n<!--        <div class=\"form-group\">-->\n<!--          <label>Email</label>-->\n<!--          <input [(ngModel)]=\"existingVaultProfile.email\" name=\"email\" #email=\"ngModel\" required email minlength=\"4\" type=\"text\" class=\"form-control\" placeholder=\"Enter your email address\">-->\n\n\n<!--        </div>&lt;!&ndash; form-group &ndash;&gt;-->\n<!--        <button [disabled]=\"!vaultProfileForm.form.valid || loading\" type=\"submit\" class=\"btn btn-az-primary btn-block\">-->\n<!--          Continue-->\n<!--          <span *ngIf=\"loading\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>-->\n<!--        </button>-->\n\n<!--        <div *ngIf=\"errorMsg\" class=\"alert alert-danger mt-3\" role=\"alert\">-->\n<!--          <strong>Error</strong> {{errorMsg}}-->\n<!--        </div>-->\n<!--      </form>-->\n\n<!--    </div>&lt;!&ndash; az-signin-header &ndash;&gt;-->\n<!--  </div>&lt;!&ndash; az-card-signin &ndash;&gt;-->\n<!--</div>&lt;!&ndash; az-signin-wrapper &ndash;&gt;-->\n","import { Pipe, PipeTransform } from '@angular/core';\nimport {DomSanitizer} from '@angular/platform-browser';\n\n@Pipe({\n  name: 'safeHtml'\n})\nexport class SafeHtmlPipe implements PipeTransform {\n  constructor(private sanitizer:DomSanitizer){}\n\n  transform(value: any, args?: any): any {\n    return this.sanitizer.bypassSecurityTrustHtml(value);\n    // return this.sanitizer.bypassSecurityTrustStyle(style);\n    // return this.sanitizer.bypassSecurityTrustXxx(style); - see docs\n  }\n\n}\n","import {Directive, ElementRef, Input, ViewContainerRef} from '@angular/core';\nimport {NavOutletService} from './nav-outlet.service';\n\n@Directive({\n  selector: '[navOutletLink]'\n})\nexport class NavOutletLinkDirective {\n\n  constructor(\n    private eleRef: ElementRef,\n    public navOutletService: NavOutletService\n  ) {}\n\n  @Input() set navOutletLink(nextPage: string) {\n    this.navOutletService.navigateByUrl(nextPage)\n  }\n}\n","import {Component, OnChanges, OnInit, SimpleChanges, ViewChild} from '@angular/core';\nimport {NavOutletDirective, } from './nav-outlet.directive';\nimport {ComponentNavPage, Routes, NavOutletRoute} from '../../app.routing';\nimport {NavOutletService} from './nav-outlet.service';\n\n@Component({\n  selector: 'app-nav-outlet',\n  templateUrl: './nav-outlet.component.html',\n  styleUrls: ['./nav-outlet.component.css']\n})\nexport class NavOutletComponent implements OnInit, OnChanges {\n  //location to dynamically load the resource list\n  @ViewChild(NavOutletDirective, {static: true}) navOutlet!: NavOutletDirective;\n\n  constructor(private navOutletService: NavOutletService) { }\n\n  ngOnInit(): void {\n    console.log(\"NavOutletComponent ngOnInit\")\n    this.loadComponent()\n\n    this.navOutletService.componentNavigationSubject.subscribe((componentNavEvent) => {\n      console.log(\"page navigation event detected in NavOutletComponent: \", componentNavEvent)\n      this.loadComponent(componentNavEvent)\n    })\n  }\n  ngOnChanges(changes: SimpleChanges) {\n    this.loadComponent()\n  }\n\n  // WARNING: errors in this method will cause silent failures and limited error messages for some reason.\n  // it will also cause the ngOnInit subscribe functions to be ignored (subscription will be broken for all future calls)\n  loadComponent(pageRoute?: NavOutletRoute) {\n    try{\n      //clear the current outlet\n      const viewContainerRef = this.navOutlet.viewContainerRef;\n      viewContainerRef.clear();\n\n      if(pageRoute == null){\n        //find the default route\n        for(let route of Routes){\n          if(route.page == ComponentNavPage.Default){\n            pageRoute = route\n            break\n          }\n        }\n        if(pageRoute == null){\n          //throw if the default page not found\n          throw new Error(\"default page not found\")\n        }\n      }\n\n      const componentRef = viewContainerRef.createComponent(pageRoute.component);\n      if(pageRoute.inputs != null){\n        for(let [key, value] of pageRoute.inputs) {\n          componentRef.instance[key] = value\n        }\n      }\n      componentRef.instance.markForCheck()\n    } catch (e) {\n      console.error(\"NavOutletComponent loadComponent error\", e)\n    }\n\n  }\n}\n","<ng-template navOutletDirective></ng-template>\n","import {Directive, ViewContainerRef} from '@angular/core';\n\n@Directive({\n  selector: '[navOutletDirective]'\n})\nexport class NavOutletDirective {\n\n  constructor(public viewContainerRef: ViewContainerRef) { }\n\n}\n","import {Injectable} from '@angular/core';\nimport {BehaviorSubject} from 'rxjs';\nimport {NavOutletRoute, Routes} from '../../app.routing';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NavOutletService {\n  // this subject is populated when the \"page\" is changed\n  public componentNavigationSubject = new BehaviorSubject<NavOutletRoute | null>(null)\n\n  constructor() {}\n\n\n  reset(){\n    this.componentNavigationSubject.next(null)\n  }\n\n  navigateByUrl(nextPage: string, payload?: Map<string, any>) {\n    //remove the \"/\" prefix if present\n    nextPage = nextPage.trim()\n    if(nextPage.startsWith(\"/\")){\n      nextPage = nextPage.substring(1)\n    }\n\n\n    console.log('navigating to page: ', nextPage)\n\n    //find the component Route by nextPage\n    let found = false;\n    for(let route of Routes) {\n      if(route.page == nextPage){\n        route.inputs = new Map()\n        //add the payload data to the route\n        //TODO: should we do a deep clone before?\n        if(payload != null && payload.size > 0){\n          route.inputs = payload\n        }\n        this.componentNavigationSubject.next(route)\n        found = true\n        console.log(\"found route info: \", nextPage)\n        break;\n      }\n    }\n    if(!found){\n      console.error(\"unknown page, could not route to: \", nextPage)\n      throw new Error(\"unknown page, could not route to: \" + nextPage)\n    }\n  }\n}\n","import {Inject, Injectable} from '@angular/core';\nimport {VaultProfile} from '../models/fasten/vaultProfile';\nimport {environment} from '../../environments/environment';\nimport {HttpClient} from '@angular/common/http';\nimport {ResponseWrapper} from '../models/response-wrapper';\nimport {BehaviorSubject} from 'rxjs';\nimport * as jose from 'jose'\nimport {ConfigService} from './config.service';\n\nexport const FASTEN_AUTH_VAULT_COOKIE_NAME = 'fasten_connect_auth_vault'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n\n\n  public IsAuthenticatedSubject = new BehaviorSubject<boolean>(false)\n\n  constructor(private _httpClient: HttpClient, private configService: ConfigService) {}\n\n\n\n\n  public async VaultAuthBegin(email: string): Promise<any> {\n    let resp = await this._httpClient.post<ResponseWrapper>(`${environment.connect_api_endpoint_base}/bridge/vault_auth_begin`, {\n      \"email\": email,\n    }, { withCredentials: true, params: {\"public_id\": this.configService.systemConfig$.publicId} }).toPromise()\n    return resp\n  }\n\n  public async VaultAuthFinish(email: string, code: string): Promise<any> {\n    let resp = await this._httpClient.post<ResponseWrapper>(`${environment.connect_api_endpoint_base}/bridge/vault_auth_finish`, {\n      \"email\": email,\n      \"code\": code\n    }, { withCredentials: true, params: {\"public_id\": this.configService.systemConfig$.publicId} }).toPromise()\n    return resp\n  }\n\n  public async Signout(): Promise<any> {\n    this.publishAuthenticationState(false)\n    return this.deleteCookie(FASTEN_AUTH_VAULT_COOKIE_NAME)\n    // // let remotePouchDb = new PouchDB(this.getRemoteUserDb(localStorage.getItem(\"current_user\")), {skip_setup: true});\n    // if(this.pouchDb){\n    //   await this.pouchDb.logOut()\n    // }\n    // await this.Close()\n  }\n\n\n  public async GetJWTPayload(): Promise<any> {\n    let authToken = this.getCookie(FASTEN_AUTH_VAULT_COOKIE_NAME)\n    if (!authToken) {\n      return null\n    }\n    let jwks = jose.createRemoteJWKSet(new URL(environment.jwks_uri))\n    let issuerHost = environment.connect_api_jwt_issuer_host\n\n    try {\n      //audience and issuer must be the same. This token is only valid on the fasten connect api\n      const {payload, protectedHeader} = await jose.jwtVerify(authToken, jwks, {\n        issuer: issuerHost,\n        audience: issuerHost,\n      })\n      // @ts-ignore\n      this.vaultConfigService.systemConfig = {user: payload}\n      return payload\n    } catch (e) {\n      console.error(\"failed to verify jwt:\", e, issuerHost)\n      return null\n    }\n  }\n\n  public async IsAuthenticated(): Promise<boolean> {\n    let payload = await this.GetJWTPayload()\n    let isAuthenticated = payload != null\n    this.publishAuthenticationState(isAuthenticated)\n    return isAuthenticated\n  }\n\n  //https://stackoverflow.com/questions/34298133/angular-cookies\n  private getCookie(name: string): string {\n    const ca: Array<string> = decodeURIComponent(document.cookie).split(';');\n    const caLen: number = ca.length;\n    const cookieName = `${name}=`;\n    let c: string;\n\n    for (let i  = 0; i < caLen; i += 1) {\n      c = ca[i].replace(/^\\s+/g, '');\n      if (c.indexOf(cookieName) === 0) {\n        return c.substring(cookieName.length, c.length);\n      }\n    }\n    return '';\n  }\n\n  private deleteCookie(name: string) {\n    this.setCookie(name, '', -99999); // - 1 was not far back enough to actually remove the cookie, this sets the time before the epoch and will cause the cookie to be deleted.\n  }\n  private setCookie(name: string, value: string, expireDays: number, path: string = '') {\n    const d: Date = new Date();\n    d.setTime(d.getTime() + expireDays * 24 * 60 * 60 * 1000);\n    const expires = `expires=${d.toUTCString()}`;\n    const cpath = path ? `; path=${path}` : '';\n    document.cookie = `${name}=${value}; ${expires}${cpath}; SameSite=Lax`;\n  }\n\n  private publishAuthenticationState(authenticated: boolean){\n    if(this.IsAuthenticatedSubject.value != authenticated){\n      this.IsAuthenticatedSubject.next(authenticated)\n    }\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {BehaviorSubject} from 'rxjs';\nimport {VaultSystemConfig, vaultConfigDefaults, VaultSearchConfig, VaultProfileConfig} from '../models/vault-config';\nimport {merge} from 'lodash';\nimport {ApiMode} from '../app.constants';\nimport {VaultProfile} from '../models/fasten/vaultProfile';\nimport {Organization} from '../models/fasten/organization';\nimport {VaultService} from './vault.service';\nimport {\n  LighthouseBrandListDisplayItem, LighthouseEndpointListDisplayItem,\n  LighthousePortalListDisplayItem\n} from '../models/lighthouse/lighthouse-source-search';\nimport {RecordLocatorFacility} from '../models/fasten/record-locator-facility';\nimport {NavOutletRoute} from '../app.routing';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConfigService {\n  //TODO: there should be 3 types of \"config\" settings:\n  // 1. Service settings\n  // - apiMode\n  // - organization information\n  // - org credential information\n  // - reconnect id.\n  // 2. User settings\n  // - user token/cookie data\n  // - vault profile\n  // - current connected patient auth's\n  // - (FUTURE) potential patient auths?\n  // 3. Search settings\n  // - search filters\n  // - selected brand\n  // -\n\n  //public but should only be used in HTML directly. (via `| async`)\n  public systemConfigSubject: BehaviorSubject<VaultSystemConfig>;\n  public vaultProfileConfigSubject: BehaviorSubject<VaultProfileConfig>;\n  public searchConfigSubject: BehaviorSubject<VaultSearchConfig>;\n\n\n  private _defaultSystemConfig: VaultSystemConfig;\n\n  constructor() {\n    this._defaultSystemConfig = vaultConfigDefaults\n    this.systemConfigSubject = new BehaviorSubject(this._defaultSystemConfig);\n    this.vaultProfileConfigSubject = new BehaviorSubject(Object.setPrototypeOf({}, VaultProfileConfig.prototype));\n    this.searchConfigSubject = new BehaviorSubject({} as VaultSearchConfig);\n\n  }\n\n\n  // -----------------------------------------------------------------------------------------------------\n  // @ Accessors\n  // -----------------------------------------------------------------------------------------------------\n\n  /**\n   * Setter & getter for config\n   */\n\n  //Setter\n  set systemConfig(value: Partial<VaultSystemConfig>) {\n    // get the current config, merge the new values, and then submit.\n    const mergedSettings = merge({}, this.systemConfigSubject.getValue(), value);\n\n    // Store the value\n    if(JSON.stringify(mergedSettings) !== JSON.stringify(this.systemConfigSubject.getValue())){\n      console.log('updating system settings:', mergedSettings)\n      this.systemConfigSubject.next(mergedSettings);\n    }\n  }\n\n  //Getter\n  get systemConfig$(): VaultSystemConfig {\n    console.log('getting cached system settings:', this.systemConfigSubject.getValue())\n    return this.systemConfigSubject.getValue()\n  }\n\n  //Setter\n  set vaultProfileConfig(value: Partial<VaultProfileConfig>) {\n    // get the current config, merge the new values, and then submit.\n    const mergedSettings = merge({}, this.vaultProfileConfigSubject.getValue(), value);\n\n    // Store the value\n    if(JSON.stringify(mergedSettings) !== JSON.stringify(this.vaultProfileConfigSubject.getValue())){\n      console.log('updating vault profile settings:', mergedSettings)\n      this.vaultProfileConfigSubject.next(Object.setPrototypeOf(mergedSettings, VaultProfileConfig.prototype));\n    }\n  }\n  //Getter\n  get vaultProfileConfig$(): VaultProfileConfig {\n    console.log('getting vault profile settings:', this.vaultProfileConfigSubject.getValue())\n    return this.vaultProfileConfigSubject.getValue()\n  }\n  vaultProfileAddPendingAccount(brand: LighthouseBrandListDisplayItem, portal: LighthousePortalListDisplayItem, endpoint: LighthouseEndpointListDisplayItem){\n    let updatedVaultProfile = this.vaultProfileConfig$\n    updatedVaultProfile.addPendingAccount(brand, portal, endpoint)\n    this.vaultProfileConfig = updatedVaultProfile\n  }\n  vaultProfileAddConnectedAccount(recordLocatorFacility: RecordLocatorFacility){\n    let updatedVaultProfile = this.vaultProfileConfig$\n    updatedVaultProfile.addConnectedAccount(recordLocatorFacility)\n    this.vaultProfileConfig = updatedVaultProfile\n  }\n\n  //Setter\n  set searchConfig(value: Partial<VaultSearchConfig>) {\n    // get the current config, merge the new values, and then submit.\n    const mergedSettings = merge({}, this.searchConfigSubject.getValue(), value);\n\n    // Store the value\n    if(JSON.stringify(mergedSettings) !== JSON.stringify(this.searchConfigSubject.getValue())){\n      console.log('updating search settings:', mergedSettings)\n      this.searchConfigSubject.next(mergedSettings);\n    }\n  }\n  //Getter\n  get searchConfig$(): VaultSearchConfig {\n    console.log('getting search settings:', this.searchConfigSubject.getValue())\n    return this.searchConfigSubject.getValue()\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {BehaviorSubject} from 'rxjs';\nimport {OrganizationConnectionCallbackEvent} from '../models/organization-connection-callback-event';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MessageBusService {\n\n  //this subject is populated when in popup mode, and a Portal/Endpoint has been selected.\n  // A separate window will be opened, and credentials & metadata from that connection will be passed to this callback fn.\n  // SEE: https://docs.connect.fastenhealth.com/stitch/webcomponent for example data structure.\n  // {\n  //   \"org_connection_id\": \"1234-1234-1234-1234-1234\",\n  //   \"endpoint_id\": \"1234-1234-1234-1234-1234\"\n  // }\n  public orgConnectionCallbackSubject = new BehaviorSubject<OrganizationConnectionCallbackEvent | null>(null)\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { ResponseWrapper } from '../models/response-wrapper';\nimport { environment } from '../../environments/environment';\nimport { Organization } from '../models/fasten/organization';\nimport { ApiMode } from '../app.constants';\nimport { OrganizationCredential } from '../models/fasten/organization-credential';\nimport { VaultProfile } from \"../models/fasten/vaultProfile\";\nimport {catchError, concatMap, filter, first, fromEvent, map, Observable, of, throwError, timeout} from 'rxjs';\nimport { DeviceDetectorService } from 'ngx-device-detector';\nimport {SearchFilter} from '../models/search-filter';\nimport {LighthouseSourceSearch} from '../models/lighthouse/lighthouse-source-search';\nimport {FormHealthSystemRequest} from '../models/forms/form-health-system-request';\nimport {FormSupportRequest} from '../models/forms/form-support-request';\nimport {RecordLocatorFacility} from '../models/fasten/record-locator-facility';\nimport {OrganizationConnectionCallbackEvent} from '../models/organization-connection-callback-event';\nimport {ConfigService} from './config.service';\nimport {VaultSystemConfig} from '../models/vault-config';\n\nexport const ConnectWindowTimeout = 2*60*1000 //wait 2 minutes (in milliseconds)\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class VaultService {\n\n  constructor(\n    private _httpClient: HttpClient,\n    private deviceService: DeviceDetectorService,\n    public configService: ConfigService,\n  ) {\n\n    //always watch for changes to the vault\n    this.configService.systemConfigSubject.subscribe((systemConfig: VaultSystemConfig) => {\n      console.log(\"System configuration changed:\", systemConfig, this.configService.systemConfig$)\n      if(systemConfig.org_id && !systemConfig.org){\n        console.log(\"attempt to download org information, and store in config\")\n        this.getOrg(systemConfig.org_id).subscribe((org: Organization )=>{\n          console.log(\"org:\", org)\n          this.configService.systemConfig = {org: org}\n        })\n      }\n    });\n  }\n\n\n  //This function must be \".subscribed()\" to work. If not, the handler will not be registered and messages will be ignored.\n  private waitForOrgConnectionOrTimeout(openedWindow: Window): Observable<any> {\n    console.log(`waiting for postMessage notification from popup window`)\n\n    //new code to listen to post message\n    return fromEvent(window, 'message')\n      .pipe(\n        //throw an error if we wait more than 2 minutes (this will close the window)\n        timeout(ConnectWindowTimeout) as any,\n        //make sure we're only listening to events from the \"opened\" window.\n        filter((event: MessageEvent) => event.source == openedWindow),\n        //after filtering, we should only have one event to handle.\n        first(),\n        map((event: any) => {\n          console.log(`received postMessage notification from popup window & sending acknowledgment`)\n          // @ts-ignore\n          event.source.postMessage(JSON.stringify({close:true}), event.origin);\n          console.log(\"postmessage data\", event.data)\n          return JSON.parse(event.data)\n        }),\n        catchError((err) => {\n          console.warn(`timed out waiting for notification from popup (${ConnectWindowTimeout/1000}s), closing window`)\n          openedWindow.self.close()\n          return throwError(err)\n        })\n      )\n  }\n\n  public getRecordLocatorFacilities(): Observable<RecordLocatorFacility[]> {\n    return this._httpClient.get<ResponseWrapper>(`${environment.connect_api_endpoint_base}/bridge/record_locator`,\n      {params: {\"public_id\": this.configService.systemConfig$.publicId }})\n      .pipe(\n        map((response: ResponseWrapper) => {\n          console.log(\"Record Locator Response\", response)\n          return response.data as RecordLocatorFacility[];\n        })\n      );\n  }\n\n  public searchCatalogBrands(apiMode: ApiMode, filter: SearchFilter): Observable<LighthouseSourceSearch> {\n    if((typeof filter.searchAfter === 'string' || filter.searchAfter instanceof String) && (filter.searchAfter as string).length > 0){\n      filter.searchAfter = (filter.searchAfter as string).split(',')\n    } else {\n      filter.searchAfter = []\n    }\n    const endpointUrl = new URL(`${environment.connect_api_endpoint_base}/bridge/catalog/search`);\n\n    return this._httpClient.post<ResponseWrapper>(endpointUrl.toString(), filter, {params: {\n        \"public_id\": this.configService.systemConfig$.publicId,\n        'api_mode': apiMode\n      }})\n      .pipe(\n        map((response: ResponseWrapper) => {\n          console.log(\"Metadata RESPONSE\", response)\n          return response.data as LighthouseSourceSearch\n        })\n      );\n  }\n\n  public getOrg(orgId: String): Observable<Organization> {\n    return this._httpClient.get<ResponseWrapper>(`${environment.connect_api_endpoint_base}/org/${orgId}`,\n      {params: {\n        \"public_id\": this.configService.systemConfig$.publicId,\n      }})\n      .pipe(\n        map((response: ResponseWrapper) => {\n          console.log(\"Organization\", response)\n          return response.data as Organization;\n        })\n      );\n  }\n\n  requestHealthSystem(requestHealth: FormHealthSystemRequest): Observable<any> {\n    const endpointUrl = new URL(`${environment.connect_api_endpoint_base}/support/healthsystem`);\n\n    return this._httpClient.post<any>(endpointUrl.toString(), requestHealth)\n      .pipe(\n        map((response: ResponseWrapper) => {\n          // @ts-ignore\n          return {}\n        })\n      );\n  }\n\n  requestSupport(request: FormSupportRequest): Observable<any> {\n    const endpointUrl = new URL(`${environment.connect_api_endpoint_base}/support/request`);\n\n    return this._httpClient.post<any>(endpointUrl.toString(), request)\n      .pipe(\n        map((response: ResponseWrapper) => {\n          // @ts-ignore\n          return {}\n        })\n      );\n  }\n\n\n  // public verificationWithPopup(publicId: string, brandId: string, portalId: string, endpointId: string, reconnectOrgConnectionId?: string, connectMode?: ConnectMode, externalId?: string, externalState?: string): Observable<OrganizationConnectionCallbackEvent> {\n  public verificationWithPopup(): Observable<any> {\n    //todo, this should use a bridge/connect or vault endpoint\n\n    const redirectUrl = new URL(`${environment.connect_api_endpoint_base}/bridge/identity_verification/connect`);\n    redirectUrl.searchParams.set(\"public_id\", this.configService.systemConfig$.publicId);\n\n    const isDesktop = this.deviceService.isDesktop();\n    let features = \"\"\n    if(isDesktop){\n      //add optons for window.open, popup only for desktop (mobile and table will open a new tab)\n      features = \"popup=true,width=700,height=600\"\n    }\n\n    //open a external url in a new window\n    let openedWindow = window.open(redirectUrl.toString(), \"_blank\", features);\n\n    return this.waitForOrgConnectionOrTimeout(openedWindow!)\n  }\n\n  public accountConnectWithPopup(brandId: string, portalId: string, endpointId: string, reconnectOrgConnectionId?: string, externalId?: string, externalState?: string): Observable<OrganizationConnectionCallbackEvent> {\n    const redirectUrlParts = new URL(`${environment.connect_api_endpoint_base}/bridge/connect`);\n    const redirectParams = new URLSearchParams()\n    redirectParams.set(\"public_id\", this.configService.systemConfig$.publicId)\n    redirectParams.set(\"brand_id\", brandId)\n    redirectParams.set(\"portal_id\", portalId)\n    redirectParams.set(\"endpoint_id\", endpointId)\n    redirectParams.set(\"connect_mode\", \"popup\")\n    if (reconnectOrgConnectionId) {\n      redirectParams.set(\"reconnect_org_connection_id\", reconnectOrgConnectionId)\n    }\n    if (externalId) {\n      redirectParams.set(\"external_id\", externalId)\n    }\n    if (externalState) {\n      redirectParams.set(\"external_state\", externalState)\n    }\n\n    redirectUrlParts.search = redirectParams.toString()\n    console.log(redirectUrlParts.toString());\n\n\n    const isDesktop = this.deviceService.isDesktop();\n    let features = \"\"\n    if(isDesktop){\n      //add optons for window.open, popup only for desktop (mobile and table will open a new tab)\n      features = \"popup=true,width=700,height=600\"\n    }\n\n    //We're always in popup mode, we can open a new window, rather than redirecting the current window (which is an app frame)\n    //open a external url in a new window\n    let openedWindow = window.open(redirectUrlParts.toString(), \"_blank\", features);\n    return this.waitForOrgConnectionOrTimeout(openedWindow!)\n  }\n\n\n  //OLD code\n\n\n  public updateUser(oldPass: string, oldEmail: string, newEmail: string, newPass: string = \"\"): Observable<VaultProfile> {\n    const userUpdateJson = JSON.stringify({\n      email: oldEmail,\n      password: oldPass,\n      newEmail: newEmail,\n      newPassword: newPass\n    });\n    return this._httpClient.put<ResponseWrapper>(`${environment.connect_api_endpoint_base}/user`, userUpdateJson)\n      .pipe(\n        map((response: ResponseWrapper) => {\n          console.log(\"Updated User\", response)\n\n          return response.data as VaultProfile;\n        })\n      );\n  }\n\n  /**\n   * Create a new organization and associate it with the current User\n   * @param newOrg\n   * @param logoBlob\n   * @constructor\n   */\n  public createOrg(newOrg: Organization, logoBlob: Blob): Observable<ResponseWrapper> {\n    const formData = new FormData();\n\n    //add the org data to the form data\n    const orgJson = JSON.stringify(newOrg);\n    const orgJsonBlob = new Blob([orgJson], {\n      type: 'application/json'\n    });\n    formData.append(\"org\", orgJsonBlob);\n    formData.append(\"logo\", logoBlob);\n\n    let resp = this._httpClient.post<ResponseWrapper>(`${environment.connect_api_endpoint_base}/org`, formData)\n    console.log(resp)\n    return resp\n  }\n\n\n  public updateOrg(orgId: string, updateOrg: Organization, logoBlob?: Blob | null): Observable<Organization> {\n    const formData = new FormData();\n\n    //add the org data to the form data\n    const orgJson = JSON.stringify(updateOrg);\n    const orgJsonBlob = new Blob([orgJson], {\n      type: 'application/json'\n    });\n    formData.append(\"org\", orgJsonBlob);\n    if (logoBlob) {\n      formData.append(\"logo\", logoBlob);\n    }\n    return this._httpClient.put<ResponseWrapper>(`${environment.connect_api_endpoint_base}/org/${orgId}`, formData)\n      .pipe(\n        map((response: ResponseWrapper) => {\n          console.log(\"Updated Organization\", response)\n          return response.data as Organization;\n        })\n      );\n  }\n\n  public sendOrgInvite(orgId: string, recipientEmail: string): Observable<ResponseWrapper> {\n    return this._httpClient.post<ResponseWrapper>(`${environment.connect_api_endpoint_base}/org/${orgId}/invite`, {\n      recipient_email_address: recipientEmail,\n      org_id: orgId\n    })\n  }\n\n  // public createOrgCredentials(orgId: string, apiMode: ApiMode, redirectUrl: string, note: string): Observable<{ action: CRUDMode, org_credential: OrganizationCredential, private_key: string }> {\n  //   return this._httpClient.post<ResponseWrapper>(`${environment.connect_api_endpoint_base}/org/${orgId}/credentials`, {\n  //     api_mode: apiMode,\n  //     redirect_uri: redirectUrl,\n  //     note: note\n  //   })\n  //     .pipe(\n  //       map((response: ResponseWrapper) => {\n  //         console.log(\"Organization Credential\", response)\n  //         response.data.action = CRUDMode.Create\n  //         return response.data as { action: CRUDMode, org_credential: OrganizationCredential, private_key: string };\n  //       })\n  //     );\n  // }\n\n  public getOrgCredentials(orgId: string): Observable<OrganizationCredential[]> {\n    return this._httpClient.get<ResponseWrapper>(`${environment.connect_api_endpoint_base}/org/${orgId}/credentials`)\n      .pipe(\n        map((response: ResponseWrapper) => {\n          console.log(\"Organization Credentials\", response)\n          return response.data as OrganizationCredential[];\n        })\n      );\n  }\n\n\n\n\n\n\n\n\n\n}\n","import {Observable} from 'rxjs';\nimport {VaultService} from '../services/vault.service';\nimport {Router} from '@angular/router';\nimport {NavOutletService} from '../router/nav-outlet/nav-outlet.service';\nimport {ComponentNavPage} from '../app.routing';\n\nexport interface ConnectData {\n  public_id: string;\n  catalog_brand_id: string;\n  catalog_portal_id: string;\n  catalog_endpoint_id: string;\n\n\n  //only populated when reconnect_org_connection is present\n  org_connection_id?: string;\n  external_id?: string\n  external_state?: string\n}\n\nexport function ConnectHelper(vaultApi:VaultService, navOutletService: NavOutletService,  connectData: ConnectData): void {\n  vaultApi.accountConnectWithPopup(connectData.catalog_brand_id, connectData.catalog_portal_id, connectData.catalog_endpoint_id, connectData.org_connection_id, connectData.external_id, connectData.external_state).subscribe((orgConnectionCallbackData) => {\n    console.log(orgConnectionCallbackData)\n\n    if(!orgConnectionCallbackData){\n      return //wait for redirect\n    }\n\n    //Note: this code will only run when this.connectMode == popup\n    //when connectMode == 'redirect', the user is redirected in the same window, and this code is never executed.\n\n    // messageBus.orgConnectionCallbackSubject.next(orgConnectionCallbackData)\n\n    // //redirect the browser back to the search page (TODO: this should show the support request page if an error occurred)\n    // messageBus.componentNavigationSubject.next({\n    //   page: ComponentNavPage.Search,\n    // } as ComponentNavigationEvent)\n    navOutletService.navigateByUrl(ComponentNavPage.Dashboard);\n  })\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  name: \"development\",\n\n  //specify the lighthouse base that we're going to use to authenticate against all our source/providers. Must not have trailing slash\n  lighthouse_api_endpoint_base: 'https://lighthouse.fastenhealth.com',\n\n  //used to specify the api server that we're going to use (can be relative or absolute). Must not have trailing slash\n  // connect_api_endpoint_base: 'https://api.connect-dev.fastenhealth.com/v1',\n  // if relative, must start with /\n  connect_api_endpoint_base: 'https://api.connect-dev.fastenhealth.com/v1',\n\n  //use to specify the host that issued the JWT. This is used to verify the JWT.\n  //This should always be the same as the connect_api_endpoint_base, however in local mode it will be different because of angular proxy\n  // connect_api_jwt_issuer_host: 'http://localhost:8000',\n\n  //JWKS for JWT verification\n  // jwks_uri: 'https://cdn.fastenhealth.com/jwks/fasten-connect/local.json',\n\n\n  //when using local proxy to api.connect-dev.fastenhealth.com, uncomment the following lines:\n  jwks_uri: 'https://cdn.fastenhealth.com/jwks/fasten-connect/dev.json',\n  connect_api_jwt_issuer_host: 'https://api.connect-dev.fastenhealth.com/v1',\n\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.name == \"production\") {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"names":["ChangeDetectorRef","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","connectedAccount_r2","display_name","ɵɵtextInterpolate","ɵɵnamespaceSVG","ɵɵnamespaceHTML","ɵɵpropertyInterpolate1","pendingAccount_r3","brand","id","ɵɵsanitizeUrl","ɵɵpropertyInterpolate","name","portal","endpoint","DashboardComponent","constructor","changeRef","vaultService","configService","ngOnInit","getRecordLocatorFacilities","subscribe","facilities","console","log","facility","vaultProfileAddConnectedAccount","markForCheck","ɵɵdirectiveInject","i1","VaultService","i2","ConfigService","selectors","decls","vars","consts","template","DashboardComponent_Template","rf","ctx","ɵɵtemplate","DashboardComponent_div_10_Template","DashboardComponent_div_12_Template","tmp_0_0","ɵɵpipeBind1","vaultProfileConfigSubject","connectedPatientAccounts","ɵɵpureFunction0","_c0","tmp_1_0","pendingPatientAccounts","environment","BehaviorSubject","jose","FASTEN_AUTH_VAULT_COOKIE_NAME","AuthService","_httpClient","IsAuthenticatedSubject","VaultAuthBegin","email","_this","_asyncToGenerator","resp","post","connect_api_endpoint_base","withCredentials","params","systemConfig$","publicId","toPromise","VaultAuthFinish","code","_this2","Signout","_this3","publishAuthenticationState","deleteCookie","GetJWTPayload","_this4","authToken","getCookie","jwks","createRemoteJWKSet","URL","jwks_uri","issuerHost","connect_api_jwt_issuer_host","payload","protectedHeader","jwtVerify","issuer","audience","vaultConfigService","systemConfig","user","e","error","IsAuthenticated","_this5","isAuthenticated","ca","decodeURIComponent","document","cookie","split","caLen","length","cookieName","c","i","replace","indexOf","substring","setCookie","value","expireDays","path","d","Date","setTime","getTime","expires","toUTCString","cpath","authenticated","next","ɵɵinject","HttpClient","factory","ɵfac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}