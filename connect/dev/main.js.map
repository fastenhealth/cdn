{"version":3,"file":"main.js","mappings":";;;;;;;;;;;;;;;;;;;;;;AAAmD;AACO;AACf;AACa;AAEwB;AACnC;AACS;AACkC;AACM;;;AAiBvF,MAAM,SAAS;IACpB,YAAY,QAAkB;QAC5B,MAAM,EAAE,GAAG,sEAAmB,CAAC,yFAAqB,EAAE,EAAE,QAAQ,EAAE,CAAC,CAAC;QACpE,cAAc,CAAC,MAAM,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;IAC7C,CAAC;IAED,aAAa,KAAI,CAAC;;kEANP,SAAS;sGAAT,SAAS;0GARlB,oEAAa;QACb,uDAAW;QACX,kEAAgB;QAChB,yDAAY;mIAKH,SAAS,mBAblB,yFAAqB;QACrB,iGAAoB;QACpB,uGAAsB,aAGtB,oEAAa;QACb,uDAAW;QACX,kEAAgB;QAChB,yDAAY;kEARZ,yFAAqB,sDACrB,iGAAoB;IACpB,uGAAsB;;;;;;;;;;;;;;;;;;;;;;ACfmD;AACrB;AAOpB;AAGI;;;;;;;ICY9B,yEAAmE;IAC5D,2VAAS,4FAAwB,KAAC;IACrC,0EAA2B;IACzB,qEAAkG;IACpG,4DAAM;IACN,0EAAiC;IAE7B,uDACF;IAAA,4DAAI;IACJ,wEAA6D;IAC3D,uDACF;IAAA,4DAAI;IAEN,2EAA2H;IACzH,wDACF;IAAA,4DAAO;;;IAZqB,0DAAuE;IAAvE,kNAAuE;IAI/F,0DACF;IADE,+FACF;IAEE,0DACF;IADE,wGACF;IAGA,0DACF;IADE,2TACF;;ADpBP,MAAM,oBAAoB;IA0B/B,YAAmB,aAAgC;QAAhC,kBAAa,GAAb,aAAa,CAAmB;QAvB1C,YAAO,GAAY,oDAAY,CAAC;QAC/B,gBAAW,GAAG,IAAI,uDAAY,EAAkC,CAAC;QAG3E,YAAO,GAAG,KAAK,CAAC;QAEhB,wBAAmB,GAAqB,EAAE;QAE1C,WAAM,GAAiB,IAAI,+DAAY,EAAE;QAEzC,iDAAiD;QACjD,iBAAY,GAKR;YACF,UAAU,EAAE,CAAC;YACb,cAAc,EAAE,KAAK;YACrB,oBAAoB,EAAE,SAAS;YAC/B,eAAe,EAAE,SAAS;SAC3B;IAEsD,CAAC;IAExD,QAAQ;QACN,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC;IACzB,CAAC;IAGM,YAAY,CAAC,KAAc;QAChC,IAAG,KAAK,EAAC;YACP,IAAI,CAAC,WAAW,EAAE;SACnB;QAED,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAAC,MAAM,CAAC;QAC1C,IAAG,IAAI,CAAC,OAAO,EAAC;YACd,OAAO,CAAC,GAAG,CAAC,0CAA0C,CAAC;YACvD,OAAO,wCAAE,CAAC,IAAI,CAAC;SAChB;QACD,gCAAgC;QAChC,2DAA2D;QAE3D,IAAG,CAAC,IAAI,CAAC,MAAM,EAAC;YACd,IAAI,CAAC,MAAM,GAAG,IAAI,+DAAY,EAAE;YAChC,OAAO,CAAC,GAAG,CAAC,+DAA+D,EAAE,IAAI,CAAC,MAAM,CAAC;SAC1F;QAGD,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC;QAC3B,IAAI,CAAC,OAAO,GAAG,IAAI;QACnB,IAAI,gBAAgB,GAAG,IAAI,CAAC,aAAa,CAAC,uBAAuB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QAC7F,gBAAgB,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE;YACjC,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,OAAO,CAAC,CAAC;YACvC,0CAA0C;YAC1C,IAAI,CAAC,YAAY,CAAC,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;YAExD,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE;gBAC1F,OAAO;oBACL,KAAK,EAAE,MAAM,CAAC,OAAO;oBACrB,gBAAgB,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,IAAI,EAAE;iBACnD;YACH,CAAC,CAAC,CAAC;YAEH,8BAA8B;YAC9B,IAAG,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,IAAI,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,IAAI,CAAC,IAAI,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,IAAI,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAC;gBAC1I,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC;gBACvC,IAAI,CAAC,YAAY,CAAC,cAAc,GAAG,IAAI,CAAC;aACzC;iBAAM;gBACL,uDAAuD;gBACvD,OAAO,CAAC,GAAG,CAAC,wBAAwB,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACrG,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;aACzF;YACD,IAAI,CAAC,OAAO,GAAG,KAAK;QACtB,CAAC,EACD,KAAK,CAAC,EAAE;YACN,IAAI,CAAC,OAAO,GAAG,KAAK;YACpB,OAAO,CAAC,KAAK,CAAC,gBAAgB,EAAE,KAAK,CAAC;QACxC,CAAC,EACD,GAAG,EAAE;YACH,IAAI,CAAC,OAAO,GAAG,KAAK;YACpB,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC;QACjC,CAAC,CACF,CAAC;QACF,OAAO,gBAAgB,CAAC;IAC1B,CAAC;IAEM,WAAW,CAAC,SAAyC;QAC1D,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC;IAClC,CAAC;IAEO,WAAW;QACjB,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC;QAC9B,IAAI,CAAC,mBAAmB,GAAG,EAAE;QAC7B,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,EAAE;QAC5B,IAAI,CAAC,YAAY,GAAG;YAClB,UAAU,EAAE,CAAC;YACb,cAAc,EAAE,KAAK;YACrB,oBAAoB,EAAE,SAAS;YAC/B,eAAe,EAAE,SAAS;SAC3B;IACH,CAAC;;wFAxGU,oBAAoB;kHAApB,oBAAoB;QClBjC,0EAAiB;QAMJ,8LAA0B,mFAGjB,iBAAa,IAAI,CAAC,IAHD;QAHjC,4DAOC;QAGH,yEAA2B;QAGgC,kEAAO;QAAA,4DAAK;QACnE,uEAAyF;QACvF,qEACF;QAAA,4DAAI;QAEN,0EAAuB;QAEnB,iHAiBK;QACP,4DAAK;QAIX,2EAAwC;QACR,uEAAW;QAAA,yEAAyE;QAAA,0EAAc;QAAA,4DAAI;;QAxC3H,0DAA0B;QAA1B,qFAA0B;QAiBP,0DAAsB;QAAtB,4FAAsB;;;;;;;;;;;;;;;;;;;;;;;IE8D5C,qEAA+C;IAEC,uDAAe;IAAA,4DAAO;IAClE,2EAAiK;IAAA,uDAA0B;IAAA,4DAAO;;;;IADtJ,0DAAe;IAAf,+EAAe;IACsG,0DAA0B;IAA1B,0FAA0B;;;IAJjM,wEAAoD;IAClD,iIAKK;IAEP,qEAAe;;;IAPY,0DAAoB;IAApB,mHAAoB;;AD7EhD,MAAM,sBAAsB;IAIjC,gBAAgB,CAAC;IAEjB,QAAQ;IACR,CAAC;;4FAPU,sBAAsB;oHAAtB,sBAAsB;QCPnC,0EAAiB;QAKT,8DAAgM;QAAhM,yEAAgM;QAClL,kEAAa;QAIb,uEAAmF;QAC7F,qEAA4U;QAC5U,4DAAI;QACM,wEAAkD;QAC5D,uEAAksF;QAClsF,4DAAI;QACM,yEAAoD;QAC9D,0EAAka;QACla,4DAAI;QACM,yEAAqD;QAC/D,uEAAkyB;QAClyB,4DAAI;QACM,yEAAqD;QAC/D,uEAAqvB;QACrvB,4DAAI;QACM,yEAAqD;QAC/D,uEAA43B;QAC53B,4DAAI;QAKV,+DAAyF;QAAzF,2EAAyF;QACvF,sEAA4I;QAC9I,4DAAM;QAGN,2EAAyF;QACvF,sEAAuH;QACzH,4DAAM;QAIR,2EAA0C;QAEtC,4EAAe;QAAA,0EAAQ;QAAA,0EAAc;QAAA,4DAAS;QAAC,0FACjD;QAAA,4DAAK;QAEL,0EAA+I;QAIvI,8DAAyI;QAAzI,2EAAyI;QACvI,uEAAqL;QACvL,4DAAM;QAER,+DAA4B;QAA5B,2EAA4B;QAExB,8HACF;QAAA,4DAAI;QAKV,0EAA2E;QAGrE,8DAAyI;QAAzI,2EAAyI;QACvI,uEAAwM;QAC1M,4DAAM;QAER,+DAA4B;QAA5B,2EAA4B;QAExB,gJACF;QAAA,4DAAI;QAOd,2EAA2B;QAEvB,uIAQe;QACjB,4DAAK;QAIT,2EAAwC;QACR,uEAAW;QAAA,yEAAyE;QAAA,0EAAc;QAAA,4DAAI;;QA3D3E,2DAAiE;QAAjE,6MAAiE;QA6CrF,2DAAiB;QAAjB,iHAAiB;;;;;;;;;;;;;;;;ACpF1D,IAAY,OAGX;AAHD,WAAY,OAAO;IACjB,wBAAa;IACb,wBAAa;AACf,CAAC,EAHW,OAAO,KAAP,OAAO,QAGlB;;;;;;;;;;;;;;;;;;;ACFqC;AAED;;;ICAnC,uEAAmC;IACjC,0EACH;IAAA,4DAAO;;;IAWA,yEAAuG;IACrG,4FACF;IAAA,4DAAK;;;;IAGH,yEAAgE;IACtD,6XAAyB,IAAI,KAAE;IACrC,8DAAgJ;IAAhJ,0EAAgJ;IAC9I,sEAAkG;IACpG,4DAAM;IACN,+DAAsB;IAAtB,2EAAsB;IAAA,+DAAI;IAAA,4DAAO;IAEnC,uDACF;IAAA,4DAAK;;;IADH,0DACF;IADE,qGACF;;;;IAUJ,uFAA2G;IAA9C,4aAAyB;IAAqB,4DAAmB;;;IAAjE,uFAAyB;;;IAEpF,oFAAiE;;;IAA7C,uFAAuB;;;ADpC5C,MAAM,cAAc;CAG1B;AAQM,MAAM,qBAAqB;IAOhC;QANqB,cAAS,GAAG,EAAE,CAAC,CAAC,UAAU;QAExC,YAAO,GAAY,oDAAY;QAEtC,kBAAa,GAAmC,SAAS;IAEzC,CAAC;IAEjB,QAAQ;QACN,sDAAY,EAAE,CAAC;QAEf,IAAI,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC;QAC9C,IAAG,cAAc,CAAC,MAAM,IAAI,CAAC,IAAI,cAAc,CAAC,CAAC,CAAC,IAAI,oDAAY,EAAE;YAClE,IAAI,CAAC,OAAO,GAAG,oDAAY;SAC5B;QACD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,cAAc,EAAE,IAAI,CAAC,OAAO,CAAC;IAC3D,CAAC;;0FAjBU,qBAAqB;mHAArB,qBAAqB;;QCflC,4EAA2T;QAC/S,6DAAyB;QAAA,4DAAM;QACzC,mHAEM;QACR,4DAAS;QAGT,yEAA8L;QAOtL,+GAEK;QAEL,+MAWc;QACd,6EAAyO;QACvO,8DAAmH;QAAnH,2EAAmH;QAAA,uEAA4P;QAAA,4DAAM;QACrX,+DAAsB;QAAtB,4EAAsB;QAAA,uEAAW;QAAA,4DAAO;QAK5C,8IAA8H;QAC9H,gNAEc;QAChB,4DAAM;;;;;QAxCD,0DAA0B;QAA1B,sFAA0B;QAatB,0DAAsB;QAAtB,oFAAsB;QAuBV,0DAAsB;QAAtB,oFAAsB;;;;;;;;;;;;;;;;ACtCxC,MAAM,YAAY;IAAzB;QACE,0EAA0E;QAC1E,UAAK,GAAW,EAAE;QAElB,wEAAwE;QACxE,kBAAa,GAAa,EAAE,CAAC;QAC7B,eAAU,GAAa,EAAE,CAAC;QAC1B,eAAU,GAAY,KAAK,CAAC;QAE5B,wEAAwE;QACxE,gBAAW,GAAsB,EAAE,CAAC;QAEpC,WAAM,GAAa,EAAE,CAAC,CAAC,kEAAkE;IAC3F,CAAC;CAAA;;;;;;;;;;;;;;;;;;;ACZoC;AAIA;;;AAK9B,MAAM,iBAAiB;IAE5B,YACU,WAAuB;QAAvB,gBAAW,GAAX,WAAW,CAAY;IAC7B,CAAC;IAGE,uBAAuB,CAAC,OAAgB,EAAE,MAAoB;QACnE,IAAG,CAAC,OAAO,MAAM,CAAC,WAAW,KAAK,QAAQ,IAAI,MAAM,CAAC,WAAW,YAAY,MAAM,CAAC,IAAK,MAAM,CAAC,WAAsB,CAAC,MAAM,GAAG,CAAC,EAAC;YAC/H,MAAM,CAAC,WAAW,GAAI,MAAM,CAAC,WAAsB,CAAC,KAAK,CAAC,GAAG,CAAC;SAC/D;aAAM;YACL,MAAM,CAAC,WAAW,GAAG,EAAE;SACxB;QACD,MAAM,WAAW,GAAG,IAAI,GAAG,CAAC,uCAAuC,OAAO,IAAI,oDAAY,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,UAAS,SAAS,CAAC,CAAC;QACvH,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAkB,WAAW,CAAC,QAAQ,EAAE,EAAE,MAAM,CAAC;aAC1E,IAAI,CACH,yCAAG,CAAC,CAAC,QAAyB,EAAE,EAAE;YAChC,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,QAAQ,CAAC;YAC1C,OAAO,QAAQ,CAAC,IAA8B;QAChD,CAAC,CAAC,CACH,CAAC;IACN,CAAC;;kFArBU,iBAAiB;kHAAjB,iBAAiB,WAAjB,iBAAiB,mBAFhB,MAAM;;;;;;;;;;;;;;;ACTpB,gFAAgF;AAChF,mEAAmE;AACnE,gEAAgE;AAEzD,MAAM,WAAW,GAAG;IACzB,UAAU,EAAE,KAAK;CAClB,CAAC;AAEF;;;;;;GAMG;AACH,sEAAsE;;;;;;;;;;;;;;;;;ACfvB;AAGF;AACY;AAEzD,IAAI,6EAAsB,EAAE;IAC1B,6DAAc,EAAE,CAAC;CAClB;AAED,wEAAwB,CAAC,eAAe,CAAC,sDAAS,CAAC;KAChD,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC","sources":["./src/app/app.module.ts","./src/app/components/brand-search/brand-search.component.ts","./src/app/components/brand-search/brand-search.component.html","./src/app/components/portal-connect/portal-connect.component.ts","./src/app/components/portal-connect/portal-connect.component.html","./src/app/constants.ts","./src/app/fasten-stitch/fasten-stitch.component.ts","./src/app/fasten-stitch/fasten-stitch.component.html","./src/app/models/search-filter.ts","./src/app/services/lighthouse.service.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import { NgModule, Injector } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport {FormsModule} from '@angular/forms';\nimport { createCustomElement } from '@angular/elements';\n\nimport { FastenStitchComponent } from './fasten-stitch/fasten-stitch.component';\nimport {CommonModule} from '@angular/common';\nimport {HttpClientModule} from '@angular/common/http';\nimport { BrandSearchComponent } from './components/brand-search/brand-search.component';\nimport { PortalConnectComponent } from './components/portal-connect/portal-connect.component';\n\n@NgModule({\n  declarations: [\n    FastenStitchComponent,\n    BrandSearchComponent,\n    PortalConnectComponent,\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    HttpClientModule,\n    CommonModule,\n  ],\n  providers: [],\n  entryComponents: [FastenStitchComponent]\n})\nexport class AppModule {\n  constructor(injector: Injector) {\n    const el = createCustomElement(FastenStitchComponent, { injector });\n    customElements.define('fasten-stitch', el);\n  }\n\n  ngDoBootstrap() {}\n}\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\nimport {SearchFilter} from '../../models/search-filter';\nimport {\n  LighthouseBrandListDisplayItem,\n  LighthouseSourceSearch,\n  LighthouseSourceSearchAggregation\n} from '../../models/lighthouse/lighthouse-source-search';\nimport {SourceListItem} from '../../fasten-stitch/fasten-stitch.component';\nimport {Observable, of} from 'rxjs';\nimport {LighthouseService} from '../../services/lighthouse.service';\nimport {PatientAccessBrand} from '../../models/patient-access-brands';\nimport {ApiMode} from '../../constants';\n\n@Component({\n  selector: 'app-brand-search',\n  templateUrl: './brand-search.component.html',\n  styleUrls: ['./brand-search.component.css']\n})\nexport class BrandSearchComponent implements OnInit {\n\n  @Input() brand!: LighthouseBrandListDisplayItem;\n  @Input() apiMode: ApiMode = ApiMode.Test;\n  @Output() brandChange = new EventEmitter<LighthouseBrandListDisplayItem>();\n\n\n  loading = false;\n\n  lighthouseBrandList: SourceListItem[] = []\n\n  filter: SearchFilter = new SearchFilter()\n\n  //limits that are tied to the current result set.\n  resultLimits: {\n    totalItems: number,\n    scrollComplete: boolean,\n    platformTypesBuckets: LighthouseSourceSearchAggregation | undefined,\n    categoryBuckets: LighthouseSourceSearchAggregation | undefined,\n  } = {\n    totalItems: 0,\n    scrollComplete: false,\n    platformTypesBuckets: undefined,\n    categoryBuckets: undefined\n  }\n\n  constructor(public lighthouseApi: LighthouseService) { }\n\n  ngOnInit(): void {\n    this.querySources(true)\n  }\n\n\n  public querySources(reset: boolean): Observable<LighthouseSourceSearch|null> {\n    if(reset){\n      this.resetSearch()\n    }\n\n    console.log(\"querySources()\", this.filter)\n    if(this.loading){\n      console.log(\"already loading, ignoring querySources()\")\n      return of(null)\n    }\n    //TODO: pass filter to function.\n    // this.location.replaceState('/dashboard','', this.filter)\n\n    if(!this.filter){\n      this.filter = new SearchFilter()\n      console.log(\"querySources() - no filter provided, using current form value\", this.filter)\n    }\n\n\n    this.filter.fields = [\"*\"];\n    this.loading = true\n    var searchObservable = this.lighthouseApi.searchLighthouseSources(this.apiMode, this.filter);\n    searchObservable.subscribe(wrapper => {\n        console.log(\"search sources\", wrapper);\n        // this.searchResults = wrapper.hits.hits;\n        this.resultLimits.totalItems = wrapper.hits.total.value;\n\n        this.lighthouseBrandList = this.lighthouseBrandList.concat(wrapper.hits.hits.map((result) => {\n          return {\n            brand: result._source,\n            searchHighlights: result?.highlight?.aliases || []\n          }\n        }))\n\n        //check if scroll is complete.\n        if(!wrapper?.hits || !wrapper?.hits?.hits || wrapper?.hits?.hits?.length == 0 || wrapper?.hits?.total?.value == wrapper?.hits?.hits?.length){\n          console.log(\"SCROLL_COMPLETE!@@@@@@@@\")\n          this.resultLimits.scrollComplete = true;\n        } else {\n          //change the current Page (but don't cause a new query)\n          console.log(\"SETTING NEXT SORT KEY:\", wrapper.hits.hits[wrapper.hits.hits.length - 1].sort.join(','))\n          this.filter.searchAfter = wrapper.hits.hits[wrapper.hits.hits.length - 1].sort.join(\",\")\n        }\n        this.loading = false\n      },\n      error => {\n        this.loading = false\n        console.error(\"sources FAILED\", error)\n      },\n      () => {\n        this.loading = false\n        console.log(\"sources finished\")\n      }\n    );\n    return searchObservable;\n  }\n\n  public selectBrand(brandItem: LighthouseBrandListDisplayItem){\n    this.brandChange.emit(brandItem)\n  }\n\n  private resetSearch(){\n    console.log(\"reset search...\")\n    this.lighthouseBrandList = []\n    this.filter.searchAfter = []\n    this.resultLimits = {\n      totalItems: 0,\n      scrollComplete: false,\n      platformTypesBuckets: undefined,\n      categoryBuckets: undefined\n    }\n  }\n\n\n\n}\n","<form action=\"#\">\n  <div class=\"grid gap-4 mb-4 sm:grid-cols-2\">\n    <div class=\"sm:col-span-2\">\n      <input type=\"text\"\n             name=\"name\"\n             id=\"name\"\n             [(ngModel)]=\"filter.query\"\n             class=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500\"\n             placeholder=\"Ex. HCA Healthcare, Ascension, Common Spirit, Trinity, LifePoint Health\"\n             (keyup)=\"querySources(true)\"\n      >\n    </div>\n\n    <div class=\"sm:col-span-2\">\n\n      <div class=\"hidden flex items-center justify-between mb-4\">\n        <h5 class=\"leading-none text-gray-900 dark:text-white\">Popular</h5>\n        <a href=\"#\" class=\"text-sm font-medium text-blue-600 hover:underline dark:text-blue-500\">\n          View all\n        </a>\n      </div>\n      <div class=\"flow-root\">\n        <ul role=\"list\" class=\"divide-y divide-gray-200 dark:divide-gray-700 min-h-80 max-h-80 overflow-auto\">\n          <li *ngFor=\"let brand of lighthouseBrandList\" class=\"py-3 sm:py-4\">\n            <div (click)=\"selectBrand(brand.brand)\" class=\"flex items-center\">\n              <div class=\"flex-shrink-0\">\n                <img class=\"w-10 max-h-8\" src=\"https://cdn.fastenhealth.com/logos/sources/{{brand.brand.id}}.png\">\n              </div>\n              <div class=\"flex-1 min-w-0 ms-4\">\n                <p class=\"text-sm font-medium text-gray-900 truncate dark:text-white\">\n                  {{brand.brand.name}}\n                </p>\n                <p class=\"text-sm text-gray-500 truncate dark:text-gray-400\">\n                  {{brand.brand.brand_website}}\n                </p>\n              </div>\n              <span class=\"bg-blue-100 text-blue-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300\">\n                {{brand.brand?.portals?.length}} {{brand.brand?.portals?.length == 1 ? 'portal' : 'portals'}}\n              </span>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n  <div class=\"flex justify-end space-x-4\">\n    <p class=\"font-light text-xs\">Powered by <a class=\"underline\" target=\"_blank\" href=\"https://www.fastenhealth.com\">Fasten Connect</a></p>\n  </div>\n</form>\n","import {Component, Input, OnInit} from '@angular/core';\nimport {LighthouseBrandListDisplayItem} from '../../models/lighthouse/lighthouse-source-search';\n\n@Component({\n  selector: 'app-portal-connect',\n  templateUrl: './portal-connect.component.html',\n  styleUrls: ['./portal-connect.component.css']\n})\nexport class PortalConnectComponent implements OnInit {\n\n  @Input() brand!: LighthouseBrandListDisplayItem;\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n<form action=\"#\">\n  <div class=\"grid gap-4 mb-4 sm:grid-cols-8\">\n\n    <div class=\"flex justify-between sm:col-span-6 sm:col-start-2\">\n      <div class=\"relative w-20 h-20 overflow-hidden bg-gray-100 rounded-full dark:bg-gray-600\">\n        <svg class=\"absolute w-50 h-50 text-gray-400 -left-1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\"  viewBox=\"0 0 1080 1080\" xml:space=\"preserve\">\n                      <defs></defs>\n                      <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"transparent\"></rect>\n                      <g transform=\"matrix(1 0 0 1 540 540)\" id=\"accd78ea-fb00-446e-b196-ed1a7fe68ae9\"  >\n            </g>\n                      <g transform=\"matrix(1 0 0 1 540 540)\" id=\"cd83ce0e-f57b-4364-b223-ecb77b5a1129\"  >\n            <rect style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1; visibility: hidden;\" vector-effect=\"non-scaling-stroke\"  x=\"-540\" y=\"-540\" rx=\"0\" ry=\"0\" width=\"1080\" height=\"1080\" />\n            </g>\n                      <g transform=\"matrix(3.12 0 0 3.12 540 566.92)\"  >\n            <path style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(25,216,197); fill-rule: nonzero; opacity: 1;\" vector-effect=\"non-scaling-stroke\"  transform=\" translate(-114.01, -75.59)\" d=\"M 177.55021 79.33264 C 168.21895 70.01322 158.89315 60.68855 149.56574999999998 51.365719999999996 L 150.61852 35.15116 C 150.72052 33.58248 149.5316 32.228489999999994 147.96337 32.12741 L 141.05798 31.678659999999997 C 139.48975 31.576659999999997 138.13576999999998 32.765809999999995 138.034 34.33358 L 137.69817999999998 39.50499 C 135.04303 36.85098 132.38719999999998 34.19697 129.73206 31.54296 C 125.38528999999998 27.198240000000002 121.04169999999999 22.85055 116.68923999999998 18.51107 C 115.07456999999998 16.90163 113.05667999999999 16.83333 111.51850999999998 18.36741 C 105.06368999999998 24.80151 98.62731999999998 31.253140000000002 92.16657999999998 37.68177 C 92.13970999999998 37.70864 92.13105999999998 37.73072 92.10783999999998 37.75645 L 83.14426999999998 46.72025 C 83.11261999999998 46.74734 83.08620999999998 46.75736 83.05251999999997 46.79106 C 72.10248999999997 57.755210000000005 61.13742999999997 68.70547 50.179649999999974 79.66256 C 49.94058999999997 79.90116 49.71928999999997 80.17232 49.550129999999974 80.4642 C 48.241679999999974 82.71818 49.81809999999997 85.53088000000001 52.44387999999997 85.55297 C 56.80339999999997 85.5894 61.16360999999997 85.57528 65.52358999999997 85.5557 C 66.10870999999997 85.55206 66.37691999999997 85.66567 66.52194999999998 86.31386 C 67.87752999999998 92.38163 69.28296999999998 98.4371 70.67064999999998 104.49781 C 72.84926999999998 114.0103 75.03221999999998 123.52211 77.18852999999999 133.04007000000001 C 77.34722 133.73994000000002 77.64228999999999 133.92436 78.34807999999998 133.92436 C 102.14421999999999 133.90296 125.94013999999999 133.90387 149.73605999999998 133.92254 C 150.41771999999997 133.92345 150.66223999999997 133.73084 150.8157 133.05692 C 154.35536 117.50488999999999 157.92849999999999 101.95991999999998 161.46815999999998 86.40765999999999 C 161.62297999999998 85.72758999999999 161.88252999999997 85.54590999999999 162.55576 85.55023999999999 C 166.86292 85.58142999999998 171.17052999999999 85.57618999999998 175.47790999999998 85.56002999999998 C 177.37148 85.55296999999999 178.72956999999997 84.32306999999999 178.92377 82.45567999999999 C 179.05719 81.16999999999999 178.42698 80.20874999999998 177.55021 79.33265999999999 Z M 122.66093 51.64393 C 122.66116 51.64234 122.66139 51.64051 122.66161 51.63778 C 122.6689 51.62981 122.67595 51.62093 122.68324 51.61296 C 122.67732 51.62366 122.66844 51.63436 122.66093 51.64392 Z\" stroke-linecap=\"round\" />\n            </g>\n                      <g transform=\"matrix(3.12 0 0 3.12 539.99 605.1)\"  >\n            <polygon style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1;\" vector-effect=\"non-scaling-stroke\"  points=\"22.61,-7.76 7.76,-7.76 7.76,-22.61 -7.76,-22.61 -7.76,-7.76 -22.61,-7.76 -22.61,7.76 -7.76,7.76 -7.76,22.61 7.76,22.61 7.76,7.76 22.61,7.76 22.61,-7.76 \" />\n            </g>\n                      <g transform=\"matrix(3.12 0 0 3.12 625.25 377.35)\"  >\n            <path style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(25,216,197); fill-rule: nonzero; opacity: 1;\" vector-effect=\"non-scaling-stroke\"  transform=\" translate(-141.33, -14.85)\" d=\"M 149.19305 8.22918 C 147.32418 6.360329999999999 144.29379 6.360329999999999 142.42432 8.22918 L 141.32763 9.325849999999999 L 140.23103 8.22918 C 138.36151 6.360329999999999 135.33113 6.360329999999999 133.4623 8.22918 C 131.59343 10.09806 131.59343 13.128449999999999 133.4623 14.99794 L 134.55895 16.09459 L 141.32764 22.86332 L 148.09637 16.094590000000004 L 149.19306 14.997940000000003 C 151.06189 13.128450000000003 151.06189 10.098060000000004 149.19306 8.229180000000003 Z\" stroke-linecap=\"round\" />\n            </g>\n                      <g transform=\"matrix(3.12 0 0 3.12 662.57 407.19)\"  >\n            <path style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(25,216,197); fill-rule: nonzero; opacity: 1;\" vector-effect=\"non-scaling-stroke\"  transform=\" translate(-153.29, -24.4)\" d=\"M 157.03689 21.25066 C 156.14629 20.36007 154.70217 20.36007 153.81128999999999 21.25066 L 153.28867 21.77327 L 152.76609 21.25066 C 151.87518 20.36007 150.43106999999998 20.36007 149.54048999999998 21.25066 C 148.64988999999997 22.14126 148.64988999999997 23.58538 149.54048999999998 24.47628 L 150.06309 24.99888 L 153.28867 28.22448 L 156.51427 24.99888 L 157.03689 24.47628 C 157.92747 23.58538 157.92747 22.14127 157.03689 21.25066 Z\" stroke-linecap=\"round\" />\n            </g>\n                      <g transform=\"matrix(3.12 0 0 3.12 663.12 339.31)\"  >\n            <path style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(25,216,197); fill-rule: nonzero; opacity: 1;\" vector-effect=\"non-scaling-stroke\"  transform=\" translate(-153.46, -2.65)\" d=\"M 156.06247 0.46319 C 155.44487999999998 -0.15439000000000003 154.44346 -0.15439000000000003 153.82567 0.46319 L 153.46326 0.8256 L 153.10088 0.46319 C 152.48308 -0.15439000000000003 151.48165999999998 -0.15439000000000003 150.86408 0.46319 C 150.24649 1.0807799999999999 150.24649 2.0822000000000003 150.86408 2.7 L 151.22648 3.0624000000000002 L 153.46326000000002 5.299200000000001 L 155.70006 3.0624000000000007 L 156.06247000000002 2.7000000000000006 C 156.68004000000002 2.082210000000001 156.68004000000002 1.0807800000000005 156.06247000000002 0.46319000000000043 Z\" stroke-linecap=\"round\" />\n            </g>\n        </svg>\n\n      </div>\n\n      <div class=\"flex items-center overflow-hidden bg-gray-100 rounded-full dark:bg-gray-600\">\n        <img class=\"w-20 h-20 p-1 rounded-full ring-2 ring-gray-300 dark:ring-gray-500\" src=\"https://cdn.fastenhealth.com/logos/sources/fasten.png\">\n      </div>\n\n\n      <div class=\"flex items-center overflow-hidden bg-gray-100 rounded-full dark:bg-gray-600\">\n        <img class=\"w-20 max-h-20 inline-block align-middle\" src=\"https://cdn.fastenhealth.com/logos/sources/{{brand.id}}.png\">\n      </div>\n    </div>\n\n\n    <div class=\"sm:col-span-6 sm:col-start-2\">\n      <h3 class=\"text-lg font-light text-center text-gray-900 dark:text-white\">\n        Acme Care uses <strong>Fasten Connect</strong> to link your medical records\n      </h3>\n\n      <ul class=\"text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white\">\n        <li class=\"w-full px-4 py-2 border-b border-gray-200 rounded-t-lg dark:border-gray-600\">\n          <div class=\"flex items-center space-x-4 rtl:space-x-reverse\">\n            <div class=\"flex-shrink-0\">\n              <svg class=\"w-6 h-6 text-gray-800 dark:text-white\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9.5 11.5 11 13l4-3.5M12 20A16.4 16.4 0 0 1 5 6.7L12 4l7 2.7A16.7 16.7 0 0 1 12 20Z\"/>\n              </svg>\n            </div>\n            <div class=\"flex-1 min-w-0\">\n              <p class=\"text-sm font-light text-gray-900 dark:text-white\">\n                Fasten lets you securely connect your medical records in seconds\n              </p>\n\n            </div>\n          </div>\n        </li>\n        <li class=\"w-full px-4 py-2 border-b border-gray-200 dark:border-gray-600\">\n          <div class=\"flex items-center space-x-4 rtl:space-x-reverse\">\n            <div class=\"flex-shrink-0\">\n              <svg class=\"w-6 h-6 text-gray-800 dark:text-white\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 14v3m-3-6V7a3 3 0 1 1 6 0v4m-8 0h10c.6 0 1 .4 1 1v7c0 .6-.4 1-1 1H7a1 1 0 0 1-1-1v-7c0-.6.4-1 1-1Z\"/>\n              </svg>\n            </div>\n            <div class=\"flex-1 min-w-0\">\n              <p class=\"text-sm font-light text-gray-900 dark:text-white\">\n                Fasten doesn't sell your personal info, and will only use it with your permission.\n              </p>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n\n    <div class=\"sm:col-span-8\">\n      <ul class=\"my-4 space-y-3\">\n        <ng-container *ngFor=\"let portal of brand?.portals\">\n          <li *ngFor=\"let endpoint of portal?.endpoints\">\n            <a href=\"#\" class=\"flex items-center p-3 text-base font-bold text-gray-900 rounded-lg bg-gray-50 hover:bg-gray-100 group hover:shadow dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-white\">\n              <span class=\"flex-1 ms-3 whitespace-nowrap\">{{portal.name}}</span>\n              <span class=\"inline-flex items-center justify-center px-2 py-0.5 ms-3 text-xs font-medium text-gray-500 bg-gray-200 rounded dark:bg-gray-700 dark:text-gray-400\">{{endpoint.platform_type}}</span>\n            </a>\n          </li>\n\n        </ng-container>\n      </ul>\n    </div>\n\n  </div>\n  <div class=\"flex justify-end space-x-4\">\n    <p class=\"font-light text-xs\">Powered by <a class=\"underline\" target=\"_blank\" href=\"https://www.fastenhealth.com\">Fasten Connect</a></p>\n  </div>\n</form>\n\n\n","export enum ApiMode {\n  Live = \"live\",\n  Test = \"test\",\n}\n","import {Component, Input, OnInit} from '@angular/core';\nimport {initFlowbite} from 'flowbite';\nimport {LighthouseBrandListDisplayItem} from '../models/lighthouse/lighthouse-source-search';\nimport {ApiMode} from '../constants';\n\nexport class SourceListItem {\n  brand: LighthouseBrandListDisplayItem\n  searchHighlights?: string[]\n}\n\n@Component({\n  // standalone: true,\n  selector: 'fasten-stitch',\n  templateUrl: './fasten-stitch.component.html',\n  styleUrls: ['./fasten-stitch.component.css']\n})\nexport class FastenStitchComponent implements OnInit {\n  @Input('public-key') publicKey = ''; //validate\n\n  public apiMode: ApiMode = ApiMode.Test\n\n  selectedBrand: LighthouseBrandListDisplayItem = undefined\n\n  constructor() { }\n\n  ngOnInit(): void {\n    initFlowbite();\n\n    let publicKeyParts = this.publicKey.split('_')\n    if(publicKeyParts.length == 3 && publicKeyParts[1] == ApiMode.Live) {\n      this.apiMode = ApiMode.Live\n    }\n    console.log(this.publicKey, publicKeyParts, this.apiMode)\n  }\n}\n","<!-- Modal toggle -->\n<button data-modal-target=\"defaultModal\" data-modal-toggle=\"defaultModal\" class=\"block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\" type=\"button\">\n  <div #ref><ng-content></ng-content></div>\n  <span *ngIf=\"!ref.hasChildNodes()\">\n    Share Records\n </span>\n</button>\n\n<!-- Main modal -->\n<div id=\"defaultModal\" tabindex=\"-1\" aria-hidden=\"true\" class=\"fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full\">\n  <div class=\"relative p-4 w-full max-w-2xl h-full md:h-auto\">\n    <!-- Modal content -->\n    <div class=\"relative p-4 bg-white rounded-lg shadow dark:bg-gray-800 sm:p-5\">\n      <!-- Modal header -->\n\n      <div class=\"flex justify-between items-center pb-4 mb-4 rounded-t border-b sm:mb-5 dark:border-gray-600\">\n        <h3 *ngIf=\"!selectedBrand; else brandName\" class=\"text-lg font-semibold text-gray-900 dark:text-white\">\n          Select a healthcare institution\n        </h3>\n\n        <ng-template #brandName>\n          <h3 class=\"text-lg font-semibold text-gray-900 dark:text-white\">\n            <button (click)=\"selectedBrand = null;\" type=\"button\" class=\"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white\">\n              <svg class=\"w-5 h-5 rtl:rotate-180\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18\" />\n              </svg>\n              <span class=\"sr-only\">Back</span>\n            </button>\n            {{selectedBrand.name}}\n          </h3>\n\n        </ng-template>\n        <button type=\"button\" class=\"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white\" data-modal-toggle=\"defaultModal\">\n          <svg aria-hidden=\"true\" class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clip-rule=\"evenodd\"></path></svg>\n          <span class=\"sr-only\">Close modal</span>\n        </button>\n      </div>\n      <!-- Modal body -->\n\n      <app-brand-search *ngIf=\"!selectedBrand; else portalConnect\" [(brand)]=\"selectedBrand\" [apiMode]=\"apiMode\"></app-brand-search>\n      <ng-template #portalConnect>\n        <app-portal-connect [brand]=\"selectedBrand\"></app-portal-connect>\n      </ng-template>\n    </div>\n  </div>\n</div>\n\n\n","\nexport class SearchFilter {\n  //primary search terms (changes here should restart the search completely)\n  query: string = \"\"\n\n  //secondary search terms/facets (changes here should restart pagination)\n  platformTypes: string[] = [];\n  categories: string[] = [];\n  showHidden: boolean = false;\n\n  //pagination - this is the current page (changes here should be ignored)\n  searchAfter: string | string[] = '';\n\n  fields: string[] = []; //specify the fields to return. if null or empty list, return all.\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {map, Observable} from 'rxjs';\nimport {LighthouseSourceSearch} from '../models/lighthouse/lighthouse-source-search';\nimport {ResponseWrapper} from '../models/response-wrapper';\nimport {SearchFilter} from '../models/search-filter';\nimport {ApiMode} from '../constants';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LighthouseService {\n\n  constructor(\n    private _httpClient: HttpClient,\n  ) { }\n\n\n  public searchLighthouseSources(apiMode: ApiMode, filter: SearchFilter): Observable<LighthouseSourceSearch> {\n    if((typeof filter.searchAfter === 'string' || filter.searchAfter instanceof String) && (filter.searchAfter as string).length > 0){\n      filter.searchAfter = (filter.searchAfter as string).split(',')\n    } else {\n      filter.searchAfter = []\n    }\n    const endpointUrl = new URL(`https://lighthouse.fastenhealth.com/${apiMode == ApiMode.Live ? 'v1' :'sandbox'}/search`);\n    return this._httpClient.post<ResponseWrapper>(endpointUrl.toString(), filter)\n      .pipe(\n        map((response: ResponseWrapper) => {\n          console.log(\"Metadata RESPONSE\", response)\n          return response.data as LighthouseSourceSearch\n        })\n      );\n  }\n\n  // async getLighthouseSource(endpointId: string): Promise<LighthouseSourceMetadata> {\n  //   return this._httpClient.get<any>(`${environment.lighthouse_api_endpoint_base}/connect/${endpointId}`)\n  //     .pipe(\n  //       map((response: ResponseWrapper) => {\n  //         return response.data as LighthouseSourceMetadata\n  //       })\n  //     ).toPromise();\n  // }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}