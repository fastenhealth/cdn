{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app.module.ts","./src/app/components/brand-search/brand-search.component.ts","./src/app/components/brand-search/brand-search.component.html","./src/app/components/portal-connect/portal-connect.component.ts","./src/app/components/portal-connect/portal-connect.component.html","./src/app/fasten-stitch/fasten-stitch.component.ts","./src/app/fasten-stitch/fasten-stitch.component.html","./src/app/models/lighthouse/lighthouse-source-search.ts","./src/app/models/search-filter.ts","./src/app/services/lighthouse.service.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import { NgModule, Injector } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport {FormsModule} from '@angular/forms';\nimport { createCustomElement } from '@angular/elements';\n\nimport { FastenStitchComponent } from './fasten-stitch/fasten-stitch.component';\nimport {CommonModule} from '@angular/common';\nimport {HttpClientModule} from '@angular/common/http';\nimport { BrandSearchComponent } from './components/brand-search/brand-search.component';\nimport { PortalConnectComponent } from './components/portal-connect/portal-connect.component';\n\n@NgModule({\n  declarations: [\n    FastenStitchComponent,\n    BrandSearchComponent,\n    PortalConnectComponent,\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    HttpClientModule,\n    CommonModule,\n  ],\n  providers: [],\n  entryComponents: [FastenStitchComponent]\n})\nexport class AppModule {\n  constructor(injector: Injector) {\n    const el = createCustomElement(FastenStitchComponent, { injector });\n    customElements.define('fasten-stitch', el);\n  }\n\n  ngDoBootstrap() {}\n}\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\nimport {SearchFilter} from '../../models/search-filter';\nimport {\n  LighthouseBrandListDisplayItem,\n  LighthouseSourceSearch,\n  LighthouseSourceSearchAggregation\n} from '../../models/lighthouse/lighthouse-source-search';\nimport {SourceListItem} from '../../fasten-stitch/fasten-stitch.component';\nimport {Observable, of} from 'rxjs';\nimport {LighthouseService} from '../../services/lighthouse.service';\nimport {PatientAccessBrand} from '../../models/patient-access-brands';\n\n@Component({\n  selector: 'app-brand-search',\n  templateUrl: './brand-search.component.html',\n  styleUrls: ['./brand-search.component.css']\n})\nexport class BrandSearchComponent implements OnInit {\n\n  @Input() brand!: LighthouseBrandListDisplayItem;\n  @Output() brandChange = new EventEmitter<LighthouseBrandListDisplayItem>();\n\n\n  loading = false;\n\n  lighthouseBrandList: SourceListItem[] = []\n\n  filter: SearchFilter = new SearchFilter()\n\n  //limits that are tied to the current result set.\n  resultLimits: {\n    totalItems: number,\n    scrollComplete: boolean,\n    platformTypesBuckets: LighthouseSourceSearchAggregation | undefined,\n    categoryBuckets: LighthouseSourceSearchAggregation | undefined,\n  } = {\n    totalItems: 0,\n    scrollComplete: false,\n    platformTypesBuckets: undefined,\n    categoryBuckets: undefined\n  }\n\n  constructor(public lighthouseApi: LighthouseService) { }\n\n  ngOnInit(): void {\n    this.querySources(true)\n  }\n\n\n  public querySources(reset: boolean): Observable<LighthouseSourceSearch|null> {\n    if(reset){\n      this.resetSearch()\n    }\n\n    console.log(\"querySources()\", this.filter)\n    if(this.loading){\n      console.log(\"already loading, ignoring querySources()\")\n      return of(null)\n    }\n    //TODO: pass filter to function.\n    // this.location.replaceState('/dashboard','', this.filter)\n\n    if(!this.filter){\n      this.filter = new SearchFilter()\n      console.log(\"querySources() - no filter provided, using current form value\", this.filter)\n    }\n\n\n    this.filter.fields = [\"*\"];\n    this.loading = true\n    var searchObservable = this.lighthouseApi.searchLighthouseSources(this.filter);\n    searchObservable.subscribe(wrapper => {\n        console.log(\"search sources\", wrapper);\n        // this.searchResults = wrapper.hits.hits;\n        this.resultLimits.totalItems = wrapper.hits.total.value;\n\n        this.lighthouseBrandList = this.lighthouseBrandList.concat(wrapper.hits.hits.map((result) => {\n          return {\n            brand: result._source,\n            searchHighlights: result?.highlight?.aliases || []\n          }\n        }))\n\n        //check if scroll is complete.\n        if(!wrapper?.hits || !wrapper?.hits?.hits || wrapper?.hits?.hits?.length == 0 || wrapper?.hits?.total?.value == wrapper?.hits?.hits?.length){\n          console.log(\"SCROLL_COMPLETE!@@@@@@@@\")\n          this.resultLimits.scrollComplete = true;\n        } else {\n          //change the current Page (but don't cause a new query)\n          console.log(\"SETTING NEXT SORT KEY:\", wrapper.hits.hits[wrapper.hits.hits.length - 1].sort.join(','))\n          this.filter.searchAfter = wrapper.hits.hits[wrapper.hits.hits.length - 1].sort.join(\",\")\n        }\n        this.loading = false\n      },\n      error => {\n        this.loading = false\n        console.error(\"sources FAILED\", error)\n      },\n      () => {\n        this.loading = false\n        console.log(\"sources finished\")\n      }\n    );\n    return searchObservable;\n  }\n\n  public selectBrand(brandItem: LighthouseBrandListDisplayItem){\n    this.brandChange.emit(brandItem)\n  }\n\n  private resetSearch(){\n    console.log(\"reset search...\")\n    this.lighthouseBrandList = []\n    this.filter.searchAfter = []\n    this.resultLimits = {\n      totalItems: 0,\n      scrollComplete: false,\n      platformTypesBuckets: undefined,\n      categoryBuckets: undefined\n    }\n  }\n\n\n\n}\n","<form action=\"#\">\n  <div class=\"grid gap-4 mb-4 sm:grid-cols-2\">\n    <div class=\"sm:col-span-2\">\n      <input type=\"text\"\n             name=\"name\"\n             id=\"name\"\n             [(ngModel)]=\"filter.query\"\n             class=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500\"\n             placeholder=\"Ex. HCA Healthcare, Ascension, Common Spirit, Trinity, LifePoint Health\"\n             (keyup)=\"querySources(true)\"\n      >\n    </div>\n\n    <div class=\"sm:col-span-2\">\n\n      <div class=\"hidden flex items-center justify-between mb-4\">\n        <h5 class=\"leading-none text-gray-900 dark:text-white\">Popular</h5>\n        <a href=\"#\" class=\"text-sm font-medium text-blue-600 hover:underline dark:text-blue-500\">\n          View all\n        </a>\n      </div>\n      <div class=\"flow-root\">\n        <ul role=\"list\" class=\"divide-y divide-gray-200 dark:divide-gray-700 min-h-80 max-h-80 overflow-auto\">\n          <li *ngFor=\"let brand of lighthouseBrandList\" class=\"py-3 sm:py-4\">\n            <div (click)=\"selectBrand(brand.brand)\" class=\"flex items-center\">\n              <div class=\"flex-shrink-0\">\n                <img class=\"w-10 max-h-8\" src=\"https://cdn.fastenhealth.com/logos/sources/{{brand.brand.id}}.png\">\n              </div>\n              <div class=\"flex-1 min-w-0 ms-4\">\n                <p class=\"text-sm font-medium text-gray-900 truncate dark:text-white\">\n                  {{brand.brand.name}}\n                </p>\n                <p class=\"text-sm text-gray-500 truncate dark:text-gray-400\">\n                  {{brand.brand.brand_website}}\n                </p>\n              </div>\n              <span class=\"bg-blue-100 text-blue-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300\">\n                {{brand.brand?.portals?.length}} {{brand.brand?.portals?.length == 1 ? 'portal' : 'portals'}}\n              </span>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n  <div class=\"flex justify-end space-x-4\">\n    <p class=\"font-light text-xs\">Powered by <a class=\"underline\" target=\"_blank\" href=\"https://www.fastenhealth.com\">Fasten Connect</a></p>\n  </div>\n</form>\n","import {Component, Input, OnInit} from '@angular/core';\nimport {LighthouseBrandListDisplayItem} from '../../models/lighthouse/lighthouse-source-search';\n\n@Component({\n  selector: 'app-portal-connect',\n  templateUrl: './portal-connect.component.html',\n  styleUrls: ['./portal-connect.component.css']\n})\nexport class PortalConnectComponent implements OnInit {\n\n  @Input() brand!: LighthouseBrandListDisplayItem;\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","\n<form action=\"#\">\n  <div class=\"grid gap-4 mb-4 sm:grid-cols-8\">\n\n    <div class=\"flex justify-between sm:col-span-6 sm:col-start-2\">\n      <div class=\"relative w-20 h-20 overflow-hidden bg-gray-100 rounded-full dark:bg-gray-600\">\n        <svg class=\"absolute w-24 h-24 text-gray-400 -left-1\" fill=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\" clip-rule=\"evenodd\"></path></svg>\n      </div>\n\n      <div class=\"flex items-center overflow-hidden bg-gray-100 rounded-full dark:bg-gray-600\">\n        <img class=\"w-20 h-20 p-1 rounded-full ring-2 ring-gray-300 dark:ring-gray-500\" src=\"https://cdn.fastenhealth.com/logos/sources/fasten.png\">\n      </div>\n\n\n      <div class=\"flex items-center overflow-hidden bg-gray-100 rounded-full dark:bg-gray-600\">\n        <img class=\"w-20 max-h-20 inline-block align-middle\" src=\"https://cdn.fastenhealth.com/logos/sources/{{brand.id}}.png\">\n      </div>\n    </div>\n\n\n    <div class=\"sm:col-span-6 sm:col-start-2\">\n      <h3 class=\"text-lg font-light text-center text-gray-900 dark:text-white\">\n        Example Inc uses <strong>Fasten Connect</strong> to link your medical records\n      </h3>\n\n      <ul class=\"text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white\">\n        <li class=\"w-full px-4 py-2 border-b border-gray-200 rounded-t-lg dark:border-gray-600\">\n          <div class=\"flex items-center space-x-4 rtl:space-x-reverse\">\n            <div class=\"flex-shrink-0\">\n              <svg class=\"w-6 h-6 text-gray-800 dark:text-white\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9.5 11.5 11 13l4-3.5M12 20A16.4 16.4 0 0 1 5 6.7L12 4l7 2.7A16.7 16.7 0 0 1 12 20Z\"/>\n              </svg>\n            </div>\n            <div class=\"flex-1 min-w-0\">\n              <p class=\"text-sm font-light text-gray-900 dark:text-white\">\n                Fasten lets you securely connect your medical records in seconds\n              </p>\n\n            </div>\n          </div>\n        </li>\n        <li class=\"w-full px-4 py-2 border-b border-gray-200 dark:border-gray-600\">\n          <div class=\"flex items-center space-x-4 rtl:space-x-reverse\">\n            <div class=\"flex-shrink-0\">\n              <svg class=\"w-6 h-6 text-gray-800 dark:text-white\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 14v3m-3-6V7a3 3 0 1 1 6 0v4m-8 0h10c.6 0 1 .4 1 1v7c0 .6-.4 1-1 1H7a1 1 0 0 1-1-1v-7c0-.6.4-1 1-1Z\"/>\n              </svg>\n            </div>\n            <div class=\"flex-1 min-w-0\">\n              <p class=\"text-sm font-light text-gray-900 dark:text-white\">\n                Fasten doesn't sell your personal info, and will only use it with your permission.\n              </p>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n\n    <div class=\"sm:col-span-8\">\n      <ul class=\"my-4 space-y-3\">\n        <ng-container *ngFor=\"let portal of brand?.portals\">\n          <li *ngFor=\"let endpoint of portal?.endpoints\">\n            <a href=\"#\" class=\"flex items-center p-3 text-base font-bold text-gray-900 rounded-lg bg-gray-50 hover:bg-gray-100 group hover:shadow dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-white\">\n              <span class=\"flex-1 ms-3 whitespace-nowrap\">{{portal.name}}</span>\n              <span class=\"inline-flex items-center justify-center px-2 py-0.5 ms-3 text-xs font-medium text-gray-500 bg-gray-200 rounded dark:bg-gray-700 dark:text-gray-400\">{{endpoint.platform_type}}</span>\n            </a>\n          </li>\n\n        </ng-container>\n      </ul>\n    </div>\n\n  </div>\n  <div class=\"flex justify-end space-x-4\">\n    <p class=\"font-light text-xs\">Powered by <a class=\"underline\" target=\"_blank\" href=\"https://www.fastenhealth.com\">Fasten Connect</a></p>\n  </div>\n</form>\n\n\n","import {Component, Input, OnInit} from '@angular/core';\nimport { initFlowbite } from 'flowbite';\nimport {SearchFilter} from '../models/search-filter';\nimport {Observable, of} from 'rxjs';\nimport {\n  LighthouseBrandListDisplayItem,\n  LighthouseSourceSearch,\n  LighthouseSourceSearchAggregation\n} from '../models/lighthouse/lighthouse-source-search';\nimport {LighthouseService} from '../services/lighthouse.service';\nimport {PatientAccessBrand} from '../models/patient-access-brands';\n\nexport class SourceListItem {\n  brand: LighthouseBrandListDisplayItem\n  searchHighlights?: string[]\n}\n\n@Component({\n  // standalone: true,\n  selector: 'fasten-stitch',\n  templateUrl: './fasten-stitch.component.html',\n  styleUrls: ['./fasten-stitch.component.css']\n})\nexport class FastenStitchComponent implements OnInit {\n  @Input() lighthouseEnv: 'sandbox' | 'prod' = 'sandbox'\n  @Input() fastenPublicKey = ''; //validate\n\n  selectedBrand: LighthouseBrandListDisplayItem = undefined\n\n  constructor() { }\n\n  ngOnInit(): void {\n    initFlowbite();\n  }\n}\n","<!-- Modal toggle -->\n<button data-modal-target=\"defaultModal\" data-modal-toggle=\"defaultModal\" class=\"block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\" type=\"button\">\n  <div #ref><ng-content></ng-content></div>\n  <span *ngIf=\"!ref.hasChildNodes()\">\n    Share Records\n </span>\n</button>\n\n<!-- Main modal -->\n<div id=\"defaultModal\" tabindex=\"-1\" aria-hidden=\"true\" class=\"fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full\">\n  <div class=\"relative p-4 w-full max-w-2xl h-full md:h-auto\">\n    <!-- Modal content -->\n    <div class=\"relative p-4 bg-white rounded-lg shadow dark:bg-gray-800 sm:p-5\">\n      <!-- Modal header -->\n\n      <div class=\"flex justify-between items-center pb-4 mb-4 rounded-t border-b sm:mb-5 dark:border-gray-600\">\n        <h3 *ngIf=\"!selectedBrand; else brandName\" class=\"text-lg font-semibold text-gray-900 dark:text-white\">\n          Select a healthcare institution\n        </h3>\n\n        <ng-template #brandName>\n          <h3 class=\"text-lg font-semibold text-gray-900 dark:text-white\">\n            <button (click)=\"selectedBrand = null;\" type=\"button\" class=\"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white\">\n              <svg class=\"w-5 h-5 rtl:rotate-180\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18\" />\n              </svg>\n              <span class=\"sr-only\">Back</span>\n            </button>\n            {{selectedBrand.name}}\n          </h3>\n\n        </ng-template>\n        <button type=\"button\" class=\"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white\" data-modal-toggle=\"defaultModal\">\n          <svg aria-hidden=\"true\" class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clip-rule=\"evenodd\"></path></svg>\n          <span class=\"sr-only\">Close modal</span>\n        </button>\n      </div>\n      <!-- Modal body -->\n\n      <app-brand-search *ngIf=\"!selectedBrand; else portalConnect\" [(brand)]=\"selectedBrand\"></app-brand-search>\n      <ng-template #portalConnect>\n        <app-portal-connect [brand]=\"selectedBrand\"></app-portal-connect>\n      </ng-template>\n    </div>\n  </div>\n</div>\n\n\n","import {PatientAccessBrand, PatientAccessPortal} from '../patient-access-brands';\n\nexport interface LighthouseEndpointListDisplayItem {\n  id: string;\n  platform_type: string;\n}\n\nexport interface LighthousePortalListDisplayItem extends PatientAccessPortal {\n  endpoints?: LighthouseEndpointListDisplayItem[];\n}\n\nexport interface LighthouseBrandListDisplayItem extends PatientAccessBrand {\n  portals: LighthousePortalListDisplayItem[];\n  hidden: boolean;\n}\n\n\n\nexport class LighthouseSourceSearchResult {\n  _index: string;\n  _type: string;\n  _id: string;\n  _score: number;\n  _source: LighthouseBrandListDisplayItem;\n  sort: string[];\n  highlight?: {\n    aliases?: string[];\n  }\n}\n\nexport class LighthouseSourceSearchAggregation {\n  sum_other_doc_count: number;\n  buckets: {\n    key: string;\n    doc_count: number;\n  }[]\n}\n\nexport class LighthouseSourceSearch {\n  _scroll_id: string;\n  took: number;\n  timed_out: boolean;\n  hits: {\n    total: {\n      value: number;\n      relation: string;\n    };\n    max_score: number;\n    hits: LighthouseSourceSearchResult[];\n  };\n  aggregations: {\n    by_platform_type: LighthouseSourceSearchAggregation\n    by_category: LighthouseSourceSearchAggregation\n  };\n}\n","\nexport class SearchFilter {\n  //primary search terms (changes here should restart the search completely)\n  query: string = \"\"\n\n  //secondary search terms/facets (changes here should restart pagination)\n  platformTypes: string[] = [];\n  categories: string[] = [];\n  showHidden: boolean = false;\n\n  //pagination - this is the current page (changes here should be ignored)\n  searchAfter: string | string[] = '';\n\n  fields: string[] = []; //specify the fields to return. if null or empty list, return all.\n}\n","import { Injectable } from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {map, Observable} from 'rxjs';\nimport {LighthouseSourceSearch} from '../models/lighthouse/lighthouse-source-search';\nimport {ResponseWrapper} from '../models/response-wrapper';\nimport {SearchFilter} from '../models/search-filter';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LighthouseService {\n\n  constructor(\n    private _httpClient: HttpClient,\n  ) { }\n\n\n  public searchLighthouseSources(filter: SearchFilter): Observable<LighthouseSourceSearch> {\n    if((typeof filter.searchAfter === 'string' || filter.searchAfter instanceof String) && (filter.searchAfter as string).length > 0){\n      filter.searchAfter = (filter.searchAfter as string).split(',')\n    } else {\n      filter.searchAfter = []\n    }\n    const endpointUrl = new URL(`https://lighthouse.fastenhealth.com/sandbox/search`);\n    return this._httpClient.post<ResponseWrapper>(endpointUrl.toString(), filter)\n      .pipe(\n        map((response: ResponseWrapper) => {\n          console.log(\"Metadata RESPONSE\", response)\n          return response.data as LighthouseSourceSearch\n        })\n      );\n  }\n\n  // async getLighthouseSource(endpointId: string): Promise<LighthouseSourceMetadata> {\n  //   return this._httpClient.get<any>(`${environment.lighthouse_api_endpoint_base}/connect/${endpointId}`)\n  //     .pipe(\n  //       map((response: ResponseWrapper) => {\n  //         return response.data as LighthouseSourceMetadata\n  //       })\n  //     ).toPromise();\n  // }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}